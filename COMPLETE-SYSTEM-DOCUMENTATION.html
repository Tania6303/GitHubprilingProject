<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MakeCode Invoice Processing System - Complete Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: #f5f7fa;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .version {
            background: rgba(255,255,255,0.2);
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            margin-top: 10px;
            font-size: 0.9em;
        }

        nav {
            background: #2c3e50;
            padding: 20px 40px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        nav a:hover {
            background: rgba(255,255,255,0.1);
        }

        .content {
            padding: 40px;
        }

        section {
            margin-bottom: 60px;
        }

        h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 30px 0 15px 0;
        }

        h4 {
            color: #2c3e50;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .module-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            border-right: 5px solid #667eea;
        }

        .module-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-size: 1.5em;
            font-weight: bold;
            margin-left: 10px;
        }

        .collapsible {
            background: #667eea;
            color: white;
            cursor: pointer;
            padding: 15px;
            border: none;
            text-align: right;
            width: 100%;
            font-size: 1.1em;
            border-radius: 5px;
            margin-top: 10px;
            transition: background 0.3s;
        }

        .collapsible:hover {
            background: #764ba2;
        }

        .collapsible:after {
            content: '\002B';
            color: white;
            font-weight: bold;
            float: left;
            margin-right: 5px;
        }

        .collapsible.active:after {
            content: "\2212";
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: #f9f9f9;
            border-radius: 0 0 5px 5px;
        }

        .collapsible-content-inner {
            padding: 20px;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .info-box {
            background: #e3f2fd;
            border-right: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3e0;
            border-right: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .success-box {
            background: #e8f5e9;
            border-right: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            margin: 0 5px;
        }

        .badge-ocr {
            background: #2196f3;
            color: white;
        }

        .badge-template {
            background: #9c27b0;
            color: white;
        }

        .badge-calculated {
            background: #ff9800;
            color: white;
        }

        .badge-search {
            background: #4caf50;
            color: white;
        }

        .architecture-diagram {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 10px auto;
            max-width: 600px;
        }

        .flow-arrow {
            font-size: 2em;
            color: #667eea;
            margin: 10px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: right;
        }

        th {
            background: #667eea;
            color: white;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        .field-list {
            background: #f5f7fa;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .field-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 3px;
            border-right: 3px solid #667eea;
        }

        .toc {
            background: #f5f7fa;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
        }

        .toc ul {
            list-style: none;
            padding-right: 20px;
        }

        .toc li {
            margin: 10px 0;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
            font-size: 1.1em;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .example-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .highlight {
            background: #fff59d;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ”„ MakeCode Invoice Processing System</h1>
        <p>××¢×¨×›×ª ×¢×™×‘×•×“ ×—×©×‘×•× ×™×•×ª ××•×˜×•××˜×™×ª ×-OCR ×œ-Priority ERP</p>
        <div class="version">×’×¨×¡×” 1.7.2 | 6 × ×•×‘××‘×¨ 2025</div>
    </header>

    <nav>
        <ul>
            <li><a href="#overview">×¡×§×™×¨×” ×›×œ×œ×™×ª</a></li>
            <li><a href="#architecture">××¨×›×™×˜×§×˜×•×¨×”</a></li>
            <li><a href="#module1">××•×“×•×œ 1: SupplierDataLearning</a></li>
            <li><a href="#module2">××•×“×•×œ 2: Processing Invoice</a></li>
            <li><a href="#module3">××•×“×•×œ 3: Production Invoice</a></li>
            <li><a href="#workflow">×ª×”×œ×™×š ×¢×‘×•×“×”</a></li>
            <li><a href="#examples">×“×•×’×××•×ª</a></li>
            <li><a href="#troubleshooting">×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª</a></li>
        </ul>
    </nav>

    <div class="content">

        <!-- TABLE OF CONTENTS -->
        <section id="toc">
            <h2>ğŸ“‘ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×</h2>
            <div class="toc">
                <ul>
                    <li><a href="#overview">1. ×¡×§×™×¨×” ×›×œ×œ×™×ª</a></li>
                    <li><a href="#architecture">2. ××¨×›×™×˜×§×˜×•×¨×” ×•×ª×¨×©×™× ×–×¨×™××”</a></li>
                    <li><a href="#module1">3. ××•×“×•×œ 1: SupplierDataLearning - ×œ××™×“×” ×¨××©×•× ×™×ª</a>
                        <ul>
                            <li><a href="#module1-purpose">××˜×¨×” ×•×ª×¤×§×™×“</a></li>
                            <li><a href="#module1-io">×§×œ×˜ ×•×¤×œ×˜</a></li>
                            <li><a href="#module1-fields">×©×“×•×ª ××¤×•×¨×˜×™×</a></li>
                        </ul>
                    </li>
                    <li><a href="#module2">4. ××•×“×•×œ 2: Processing Invoice - ×œ××™×“×” ××“×•×’××”</a>
                        <ul>
                            <li><a href="#module2-purpose">××˜×¨×” ×•×ª×¤×§×™×“</a></li>
                            <li><a href="#module2-io">×§×œ×˜ ×•×¤×œ×˜</a></li>
                            <li><a href="#module2-outputs">4 ×¤×œ×˜×™× ××¤×•×¨×˜×™×</a></li>
                        </ul>
                    </li>
                    <li><a href="#module3">5. ××•×“×•×œ 3: Production Invoice - ×™×™×¦×•×¨ ×—×©×‘×•× ×™×•×ª</a>
                        <ul>
                            <li><a href="#module3-purpose">××˜×¨×” ×•×ª×¤×§×™×“</a></li>
                            <li><a href="#module3-io">×§×œ×˜ ×•×¤×œ×˜</a></li>
                            <li><a href="#module3-types">×¡×•×’×™ ×—×©×‘×•× ×™×•×ª</a></li>
                            <li><a href="#module3-fields">×©×“×•×ª - Drill Down</a></li>
                            <li><a href="#module3-items">×¤×¨×™×˜×™× - PINVOICEITEMS_SUBFORM</a></li>
                            <li><a href="#module3-validation">×‘×“×™×§×•×ª ×•-Validation</a></li>
                            <li><a href="#module3-metadata">Metadata</a></li>
                            <li><a href="#module3-mapping">Field Mapping</a></li>
                        </ul>
                    </li>
                    <li><a href="#workflow">6. ×ª×”×œ×™×š ×¢×‘×•×“×” ××œ×</a></li>
                    <li><a href="#examples">7. ×“×•×’×××•×ª ××œ××•×ª</a></li>
                    <li><a href="#troubleshooting">8. ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª</a></li>
                </ul>
            </div>
        </section>

        <!-- OVERVIEW -->
        <section id="overview">
            <h2>1. ğŸ¯ ×¡×§×™×¨×” ×›×œ×œ×™×ª</h2>

            <div class="info-box">
                <strong>××” ×”××¢×¨×›×ª ×¢×•×©×”?</strong><br>
                ××¢×¨×›×ª ×©×œ××” ×©××§×‘×œ×ª ×ª××•× ×” ×©×œ ×—×©×‘×•× ×™×ª ×•××™×™×¦×¨×ª JSON ××•×‘× ×” ×œ-Priority ERP.
            </div>

            <h3>×©×œ×•×©×ª ×”××•×“×•×œ×™× ×”×¢×™×§×¨×™×™×:</h3>

            <div class="module-card">
                <span class="module-number">1</span>
                <h4>SupplierDataLearning - ×œ××™×“×” ×¨××©×•× ×™×ª</h4>
                <p><strong>×ª×“×™×¨×•×ª:</strong> ×¤×¢× ××—×ª ×œ×›×œ ×¡×¤×§ ×—×“×©</p>
                <p><strong>××˜×¨×”:</strong> ×œ×œ××•×“ ××“×•×’×××•×ª ×§×™×™××•×ª ×‘-Priority ×•×œ×™×™×¦×¨ learned_config</p>
                <p><strong>×§×œ×˜:</strong> ×—×©×‘×•× ×™×•×ª ×©×›×‘×¨ × ×›× ×¡×• ×œ××¢×¨×›×ª</p>
                <p><strong>×¤×œ×˜:</strong> learned_config (×§×•× ×¤×™×’×•×¨×¦×™×” + ×ª×‘× ×™×•×ª)</p>
            </div>

            <div class="module-card">
                <span class="module-number">2</span>
                <h4>Processing Invoice - ×œ××™×“×” ××“×•×’××”</h4>
                <p><strong>×ª×“×™×¨×•×ª:</strong> ×¤×¢× ××—×ª ×œ×›×œ ×¡×¤×§ (××—×¨×™ ××•×“×•×œ 1)</p>
                <p><strong>××˜×¨×”:</strong> ×œ×œ××•×“ ××—×©×‘×•× ×™×ª ×“×•×’××” ×•×œ×™×™×¦×¨ ×”× ×—×™×•×ª ××¤×•×¨×˜×•×ª</p>
                <p><strong>×§×œ×˜:</strong> learned_config + AZURE_RESULT + ×—×©×‘×•× ×™×ª ×“×•×’××”</p>
                <p><strong>×¤×œ×˜:</strong> 4 ×¤×œ×˜×™× - invoice_data, llm_prompt, technical_config, processing_scenario</p>
            </div>

            <div class="module-card">
                <span class="module-number">3</span>
                <h4>Production Invoice - ×™×™×¦×•×¨ ×—×©×‘×•× ×™×•×ª</h4>
                <p><strong>×ª×“×™×¨×•×ª:</strong> ×›×œ ×—×©×‘×•× ×™×ª ×—×“×©×”</p>
                <p><strong>××˜×¨×”:</strong> ×œ×™×™×¦×¨ JSON ×¡×•×¤×™ ××•×›×Ÿ ×œ×©×œ×™×—×” ×œ-Priority</p>
                <p><strong>×§×œ×˜:</strong> learned_config + AZURE_RESULT + × ×ª×•× ×™× ×—×™×™× (docs_list, vehicles, import_files)</p>
                <p><strong>×¤×œ×˜:</strong> JSON ×¡×•×¤×™ + validation + execution_report</p>
            </div>

            <div class="success-box">
                <strong>âœ… ×’×¨×¡×” × ×•×›×—×™×ª:</strong><br>
                â€¢ SupplierDataLearning v1.2<br>
                â€¢ Processing Invoice v4.2<br>
                â€¢ Production Invoice v1.7.2 (×¢×“×›×•×Ÿ ××—×¨×•×Ÿ: 6 × ×•×‘××‘×¨ 2025)
            </div>
        </section>

        <!-- ARCHITECTURE -->
        <section id="architecture">
            <h2>2. ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×” ×•×ª×¨×©×™× ×–×¨×™××”</h2>

            <div class="architecture-diagram">
                <div class="flow-box">
                    <h4>Priority ERP - ×“×•×’×××•×ª ×§×™×™××•×ª</h4>
                    <p>×—×©×‘×•× ×™×•×ª ×©×›×‘×¨ × ×›× ×¡×• ×œ××¢×¨×›×ª</p>
                </div>

                <div class="flow-arrow">â¬‡ï¸</div>

                <div class="flow-box">
                    <h4>STEP 1: SupplierDataLearning</h4>
                    <p>×§×œ×˜: ×—×©×‘×•× ×™×•×ª Priority â†’ ×¤×œ×˜: learned_config</p>
                </div>

                <div class="flow-arrow">â¬‡ï¸</div>

                <div class="flow-box">
                    <h4>Azure Document Intelligence</h4>
                    <p>OCR - ×–×™×”×•×™ ×˜×§×¡×˜ ××ª××•× ×ª ×—×©×‘×•× ×™×ª</p>
                </div>

                <div class="flow-arrow">â¬‡ï¸</div>

                <div class="flow-box">
                    <h4>AzureInvoiceProcessor</h4>
                    <p>×¢×™×‘×•×“ OCR ×’×•×œ××™ â†’ AZURE_RESULT ××•×‘× ×”</p>
                </div>

                <div class="flow-arrow">â¬‡ï¸</div>

                <div class="flow-box">
                    <h4>STEP 2: Processing Invoice</h4>
                    <p>×§×œ×˜: learned_config + AZURE_RESULT + ×“×•×’××”</p>
                    <p>×¤×œ×˜: 4 ×¤×œ×˜×™× (×”× ×—×™×•×ª ×œ××©×™××•×ª ×”×‘××•×ª)</p>
                </div>

                <div class="flow-arrow">â¬‡ï¸</div>

                <div class="flow-box">
                    <h4>STEP 3: Production Invoice</h4>
                    <p>×§×œ×˜: learned_config + AZURE_RESULT + × ×ª×•× ×™× ×—×™×™×</p>
                    <p>×¤×œ×˜: JSON ×¡×•×¤×™ ×œ-Priority</p>
                </div>

                <div class="flow-arrow">â¬‡ï¸</div>

                <div class="flow-box">
                    <h4>Priority ERP</h4>
                    <p>×§×œ×™×˜×ª ×”×—×©×‘×•× ×™×ª ×”×—×“×©×”</p>
                </div>
            </div>

            <h3>×˜×‘×œ×ª ×”×©×•×•××” - 3 ×”××•×“×•×œ×™×</h3>
            <table>
                <thead>
                    <tr>
                        <th>×××¤×™×™×Ÿ</th>
                        <th>Module 1</th>
                        <th>Module 2</th>
                        <th>Module 3</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>×©×</strong></td>
                        <td>SupplierDataLearning</td>
                        <td>Processing Invoice</td>
                        <td>Production Invoice</td>
                    </tr>
                    <tr>
                        <td><strong>××¦×‘</strong></td>
                        <td>Initial Learning</td>
                        <td>Learning + Guide</td>
                        <td>Production</td>
                    </tr>
                    <tr>
                        <td><strong>××˜×¨×”</strong></td>
                        <td>×œ×œ××•×“ ××“×•×’×××•×ª</td>
                        <td>×œ×œ××•×“ ××“×•×’××”</td>
                        <td>×œ×”×¨×™×¥ ×—×“×©</td>
                    </tr>
                    <tr>
                        <td><strong>×§×œ×˜</strong></td>
                        <td>×—×©×‘×•× ×™×•×ª Priority</td>
                        <td>×“×•×’××” + OCR</td>
                        <td>OCR + ×”× ×—×™×•×ª</td>
                    </tr>
                    <tr>
                        <td><strong>×¤×œ×˜</strong></td>
                        <td>learned_config</td>
                        <td>4 ×¤×œ×˜×™×</td>
                        <td>JSON ×¡×•×¤×™</td>
                    </tr>
                    <tr>
                        <td><strong>×ª×“×™×¨×•×ª</strong></td>
                        <td>×¤×¢× ××—×ª ×œ×¡×¤×§</td>
                        <td>×¤×¢× ××—×ª ×œ×¡×¤×§</td>
                        <td>×›×œ ×—×©×‘×•× ×™×ª</td>
                    </tr>
                    <tr>
                        <td><strong>×ª×œ×•×ª</strong></td>
                        <td>-</td>
                        <td>Module 1</td>
                        <td>Module 1 + 2</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- MODULE 1 -->
        <section id="module1">
            <h2>3. ğŸ“š ××•×“×•×œ 1: SupplierDataLearning</h2>

            <div id="module1-purpose">
                <h3>××˜×¨×” ×•×ª×¤×§×™×“</h3>
                <p><strong>××•×“×•×œ ×œ××™×“×” ×¨××©×•× ×™</strong> ×©×× ×ª×— ×—×©×‘×•× ×™×•×ª ×§×™×™××•×ª ×‘××¢×¨×›×ª Priority ×•×œ×•××“ ××™×š ×œ×¢×‘×“ ×—×©×‘×•× ×™×•×ª ××¡×¤×§ ××¡×•×™×.</p>

                <div class="info-box">
                    <strong>â° ××ª×™ ×œ×”×©×ª××©?</strong><br>
                    ×¤×¢× ××—×ª ×‘×œ×‘×“ ×œ×›×œ ×¡×¤×§ ×—×“×© - ×–×• × ×§×•×“×ª ×”×”×ª×—×œ×”!
                </div>

                <h4>×ª×”×œ×™×š ×”×œ××™×“×”:</h4>
                <ol>
                    <li><strong>×§×‘×œ×ª ×“×•×’×××•×ª</strong> - ×—×©×‘×•× ×™×•×ª ×©×›×‘×¨ × ×›× ×¡×• ×œ-Priority</li>
                    <li><strong>× ×™×ª×•×— ×ª×‘× ×™×•×ª</strong> - ××–×”×” ××‘× ×™× ×—×•×–×¨×™×</li>
                    <li><strong>×–×™×”×•×™ ×—×•×§×™×</strong> - ×œ×•××“ ×—×•×§×™× (×ª×¢×•×“×•×ª, ×™×‘×•×, ×¨×›×‘×™×)</li>
                    <li><strong>×™×¦×™×¨×ª ×§×•× ×¤×™×’</strong> - ××™×™×¦×¨ learned_config ×œ×©×™××•×© ×‘××•×“×•×œ×™× ×”×‘××™×</li>
                </ol>
            </div>

            <div id="module1-io">
                <h3>×§×œ×˜ ×•×¤×œ×˜</h3>

                <button class="collapsible">ğŸ“¥ ×§×œ×˜ (Input)</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <div class="code-block">
{
  // ×“×•×’×××•×ª ×—×©×‘×•× ×™×•×ª ×-Priority
  invoices: [
    {
      PINVOICES: [{
        SUPNAME: "2511",
        BOOKNUM: "60000013",
        IVDATE: "28/10/25",
        CODE: "I",
        DETAILS: "...",
        PIVDOC_SUBFORM: [...],      // ×× ×™×© ×ª×¢×•×“×•×ª
        PINVOICEITEMS_SUBFORM: [...] // ×× ×™×© ×¤×™×¨×•×˜ ×¤×¨×™×˜×™×
      }]
    },
    ...  // ×¢×•×“ ×“×•×’×××•×ª
  ]
}
                        </div>
                    </div>
                </div>

                <button class="collapsible">ğŸ“¤ ×¤×œ×˜ (Output) - learned_config</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <div class="code-block">
{
  status: "success",
  supplier_id: "2511",
  supplier_name: "×¤×œ×¡××•×Ÿ ×‘×¢\"×",
  vendor_tax_id_reference: "512865254",
  json_files_analyzed: 10,
  templates_detected: 2,

  config: {
    supplier_config: {
      supplier_code: "2511",
      supplier_name: "×¤×œ×¡××•×Ÿ ×‘×¢\"×",
      vendor_tax_id_reference: "512865254"
    },

    structure: [
      {
        has_import: false,
        has_doc: true,
        has_vehicles: false,
        debit_type: "D",
        has_budcode: true,
        inventory_management: "managed_inventory"
      }
      // ×ª×‘× ×™×•×ª × ×•×¡×¤×•×ª...
    ],

    rules: {
      invoice_date_format: "DD/MM/YY",
      critical_patterns: {
        vehicle_rules: {...}  // ×× ×™×© ×¨×›×‘×™×
      }
    },

    document_types: [
      {
        type: "×—×©×‘×•× ×™×ª ×¢× ×ª×¢×•×“×•×ª",
        accnames: ["63001"]
      }
    ]
  },

  template: {
    PINVOICES: [{
      CODE: "I",
      DETAILS: "...",
      ACCNAME: "63001",
      PIVDOC_SUBFORM: [...]
    }]
  }
}
                        </div>
                    </div>
                </div>
            </div>

            <div id="module1-fields">
                <h3>×©×“×•×ª ××¤×•×¨×˜×™× - learned_config</h3>

                <div class="field-list">
                    <div class="field-item">
                        <strong>supplier_config</strong> - ××™×“×¢ ×‘×¡×™×¡×™ ×¢×œ ×”×¡×¤×§
                        <ul>
                            <li>supplier_code - ×§×•×“ ×”×¡×¤×§ ×‘-Priority</li>
                            <li>supplier_name - ×©× ×”×¡×¤×§</li>
                            <li>vendor_tax_id_reference - ××¡×¤×¨ ×—.×¤ / ×¢.×</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>structure</strong> - ××¢×¨×š ×ª×‘× ×™×•×ª ××¤×©×¨×™×•×ª
                        <ul>
                            <li>has_doc - ×”×× ×™×© ×ª×¢×•×“×•×ª ××©×œ×•×— (DOCNO)</li>
                            <li>has_vehicles - ×”×× ×™×© ×¨×›×‘×™×</li>
                            <li>has_import - ×”×× ×™×© ×™×‘×•× (IMPFNUM)</li>
                            <li>debit_type - ×¡×•×’ ×–×™×›×•×™/×—×™×•×‘ (D/C)</li>
                            <li>inventory_management - × ×™×”×•×œ ××œ××™</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>rules</strong> - ×—×•×§×™× ×œ×¢×™×‘×•×“
                        <ul>
                            <li>invoice_date_format - ×¤×•×¨××˜ ×ª××¨×™×š</li>
                            <li>critical_patterns - ×ª×‘× ×™×•×ª ×§×¨×™×˜×™×•×ª (×¨×›×‘×™×, ×ª×¢×•×“×•×ª)</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>template</strong> - ×ª×‘× ×™×ª JSON ×œ×—×™×§×•×™
                        <ul>
                            <li>PINVOICES - ×“×•×’××” ×œ×—×©×‘×•× ×™×ª ×ª×§×™× ×”</li>
                            <li>××©××© ×›×‘×¡×™×¡ ×œ×—×©×‘×•× ×™×•×ª ×—×“×©×•×ª</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- MODULE 2 -->
        <section id="module2">
            <h2>4. ğŸ” ××•×“×•×œ 2: Processing Invoice</h2>

            <div id="module2-purpose">
                <h3>××˜×¨×” ×•×ª×¤×§×™×“</h3>
                <p><strong>××•×“×•×œ ×œ××™×“×”</strong> ×©×× ×ª×— ×—×©×‘×•× ×™×ª ×“×•×’××” ×•×™×•×¦×¨ ×”× ×—×™×•×ª ××¤×•×¨×˜×•×ª ×œ×”×¤×¢×œ×ª ×—×©×‘×•× ×™×•×ª ×—×“×©×•×ª.</p>

                <div class="warning-box">
                    <strong>âš ï¸ ×—×©×•×‘:</strong> ××•×“×•×œ ×–×” <strong>×œ× ××™×•×¢×“ ×œproduction</strong>! ×”×•× ×¨×§ ×œ×•××“ ×•× ×•×ª×Ÿ ×”× ×—×™×•×ª.
                </div>

                <h4>×ª×”×œ×™×š ×”×œ××™×“×”:</h4>
                <ol>
                    <li><strong>×§×‘×œ×ª ×“×•×’××”</strong> - ×—×©×‘×•× ×™×ª + AZURE_RESULT + docs_list</li>
                    <li><strong>×–×™×”×•×™ ×ª×‘× ×™×ª</strong> - ××–×”×” ×× ×™×© ×ª×¢×•×“×•×ª/×™×‘×•×/×¨×›×‘×™×</li>
                    <li><strong>×œ××™×“×”</strong> - ×œ×•××“ ××”×“×•×’××” ××™×š ×œ×¢×‘×“ ×—×©×‘×•× ×™×•×ª ×›××œ×”</li>
                    <li><strong>×™×¦×™×¨×ª ×”× ×—×™×•×ª</strong> - ××™×™×¦×¨ 4 ×¤×œ×˜×™×</li>
                </ol>
            </div>

            <div id="module2-io">
                <h3>×§×œ×˜ ×•×¤×œ×˜</h3>

                <button class="collapsible">ğŸ“¥ ×§×œ×˜ (Input)</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <div class="code-block">
{
  // 1. ×”×’×“×¨×•×ª ×¡×¤×§ (×××•×“×•×œ SupplierDataLearning)
  learned_config: {
    supplier_id: "2511",
    supplier_name: "×¤×œ×¡××•×Ÿ ×‘×¢\"×",
    config: {
      supplier_config: {...},
      structure: [...],    // ×ª×‘× ×™×•×ª ××¤×©×¨×™×•×ª
      rules: {...}
    },
    template: {...}        // ×ª×‘× ×™×ª JSON
  },

  // 2. × ×ª×•× ×™× ×–××™× ×™×
  docs_list: {
    DOC_YES_NO: "Y",
    list_of_docs: [...]
  },
  import_files: {...},
  vehicles: {...},

  // 3. × ×™×ª×•×— OCR
  AZURE_RESULT: {
    data: {
      fields: {...},
      items: [...]
    }
  },
  AZURE_TEXT_CLEAN: "...",
  AZURE_TEXT: "..."
}
                        </div>
                    </div>
                </div>

                <button class="collapsible">ğŸ“¤ ×¤×œ×˜ (Output) - 4 ×¤×œ×˜×™×!</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <h4>1. invoice_data - JSON ×“×•×’××”</h4>
                        <div class="code-block">
{
  PINVOICES: [{
    SUPNAME: "2511",
    BOOKNUM: "60000013",
    IVDATE: "28/10/25",
    PIVDOC_SUBFORM: [
      { DOCNO: "25026849", BOOKNUM: "108379736" },
      ...
    ]
  }]
}
                        </div>

                        <h4>2. llm_prompt - ×”× ×—×™×•×ª ×‘×©×¤×” ×˜×‘×¢×™×ª</h4>
                        <div class="code-block">
"×¢×‘×•×¨ ×¡×¤×§ 2511 - ×¤×œ×¡××•×Ÿ:
1. ×—×¤×© BOOKNUM ×‘-UnidentifiedNumbers
2. ×”×ª×× ×¢× docs_list
3. ×™×¦×•×¨ PIVDOC_SUBFORM
..."
                        </div>

                        <h4>3. technical_config - ×§×•× ×¤×™×’ ×˜×›× ×™</h4>
                        <div class="code-block">
{
  extraction_rules: {
    booknum: {
      search_in: ["fields.InvoiceId", "UnidentifiedNumbers"],
      ...
    },
    ivdate: {
      search_in: ["fields.InvoiceDate"],
      ...
    },
    documents: {
      search_in: ["fields.UnidentifiedNumbers"],
      matching: {
        field_to_match: "BOOKNUM",
        docs_list_path: "list_of_docs"
      }
    }
  }
}
                        </div>

                        <h4>4. processing_scenario - ××” ×œ×©×œ×•×£</h4>
                        <div class="code-block">
{
  all_templates: [
    {
      check_docs: true,
      check_import: false,
      check_vehicles: false,
      debit_type: "D"
    }
  ]
}
                        </div>
                    </div>
                </div>
            </div>

            <div id="module2-outputs">
                <h3>4 ×”×¤×œ×˜×™× - ×¤×™×¨×•×˜ ××œ×</h3>

                <div class="field-list">
                    <div class="field-item">
                        <strong>1. invoice_data</strong>
                        <p>JSON ×œ×“×•×’××” - <strong>×œ× ×œ×©×œ×™×—×” ×œ-Priority!</strong> ×¨×§ ×œ××™×“×”</p>
                        <ul>
                            <li>××©××© ×›×”×“×’××” ×œ××•×“×•×œ Production</li>
                            <li>×›×•×œ×œ ××ª ×›×œ ×”×©×“×•×ª ×©× ××¦××•</li>
                            <li>××¡××Ÿ ×©×“×•×ª ×©× ×œ××“×• ××”×“×•×’××”</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>2. llm_prompt</strong>
                        <p>×”× ×—×™×•×ª ×‘×©×¤×” ×˜×‘×¢×™×ª - ×œ-LLM ××• ×œ××¤×ª×—</p>
                        <ul>
                            <li>××¡×‘×™×¨ ××ª ×”×ª×”×œ×™×š ×¦×¢×“ ××—×¨ ×¦×¢×“</li>
                            <li>××ª××¨ ××™×¤×” ×œ××¦×•× ××™×“×¢</li>
                            <li>× ×•×ª×Ÿ ×“×•×’×××•×ª ×§×•× ×§×¨×˜×™×•×ª</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>3. technical_config</strong>
                        <p>×§×•× ×¤×™×’ ×˜×›× ×™ ××¤×•×¨×˜ - ×œ××•×“×•×œ Production</p>
                        <ul>
                            <li>×—×•×§×™ ×—×™×¤×•×© ×œ×›×œ ×©×“×”</li>
                            <li>×”×ª×××•×ª ×•××™×¤×•×™×™×</li>
                            <li>×˜×™×¤×•×œ ×‘×©×’×™××•×ª</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>4. processing_scenario</strong>
                        <p>××” ×œ×©×œ×•×£ ××”××¢×¨×›×ª</p>
                        <ul>
                            <li>check_docs - ×”×× ×œ×©×œ×•×£ ×ª×¢×•×“×•×ª</li>
                            <li>check_import - ×”×× ×œ×©×œ×•×£ ×™×‘×•×</li>
                            <li>check_vehicles - ×”×× ×œ×©×œ×•×£ ×¨×›×‘×™×</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- MODULE 3 -->
        <section id="module3">
            <h2>5. âš™ï¸ ××•×“×•×œ 3: Production Invoice</h2>

            <div id="module3-purpose">
                <h3>××˜×¨×” ×•×ª×¤×§×™×“</h3>
                <p><strong>××•×“×•×œ ×™×™×¦×•×¨</strong> ×©××§×‘×œ ×—×©×‘×•× ×™×ª ×—×“×©×” ×•××™×™×¦×¨ JSON ×¡×•×¤×™ ××•×›×Ÿ ×œ×©×œ×™×—×” ×œ-Priority ERP.</p>

                <div class="success-box">
                    <strong>âœ… ×–×” ×”××•×“×•×œ ×©×¨×¥ ×‘production!</strong><br>
                    ×›×œ ×—×©×‘×•× ×™×ª ×—×“×©×” ×¢×•×‘×¨×ª ×›××Ÿ ×•××§×‘×œ×ª JSON ×ª×§× ×™.
                </div>

                <h4>×ª×”×œ×™×š ×”×¢×™×‘×•×“:</h4>
                <ol>
                    <li><strong>×§×‘×œ×ª ×§×œ×˜</strong> - learned_config + AZURE_RESULT + × ×ª×•× ×™× ×—×™×™×</li>
                    <li><strong>×–×™×”×•×™ ×ª×‘× ×™×ª</strong> - ××–×”×” ××™×–×• ×ª×‘× ×™×ª ××ª××™××”</li>
                    <li><strong>×—×™×¤×•×© × ×ª×•× ×™×</strong> - ××—×¤×© ×ª×¢×•×“×•×ª/×¨×›×‘×™×/×™×‘×•×</li>
                    <li><strong>×‘× ×™×™×ª JSON</strong> - ×™×•×¦×¨ JSON ×ª×§× ×™</li>
                    <li><strong>×‘×“×™×§×•×ª</strong> - ××××ª × ×›×•× ×•×ª</li>
                    <li><strong>×”×—×–×¨×ª ×¤×œ×˜</strong> - JSON + ×“×•×— + metadata</li>
                </ol>

                <div class="info-box">
                    <strong>×’×¨×¡×” × ×•×›×—×™×ª:</strong> v1.7.2 (6 × ×•×‘××‘×¨ 2025)<br>
                    <strong>×ª×™×§×•× ×™× ××—×¨×•× ×™×:</strong><br>
                    â€¢ DETAILS ×œ×¤×™ ×©×•×¨×” 1 PDES<br>
                    â€¢ PDES ××ª×™××•×¨ ××•×¦×¨×™× ×××™×ª×™×™× (×œ× ×©××•×ª ×—×©×‘×•× ×•×ª)<br>
                    â€¢ PRICE = SubTotal (×œ×¤× ×™ ××¢×)<br>
                    â€¢ metadata ××•×¨×—×‘<br>
                    â€¢ field_mapping ××¤×•×¨×˜
                </div>
            </div>

            <div id="module3-io">
                <h3>×§×œ×˜ ×•×¤×œ×˜</h3>

                <button class="collapsible">ğŸ“¥ ×§×œ×˜ (Input)</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <div class="code-block">
{
  input: [
    { name: "learned_config", value: {...} },
    { name: "docs_list", value: {...} },
    { name: "import_files", value: {...} },
    { name: "vehicles", value: {...} },
    { name: "AZURE_RESULT", value: {...} },
    { name: "AZURE_TEXT_CLEAN", value: "..." },
    { name: "AZURE_TEXT", value: "..." }
  ]
}
                        </div>

                        <h4>×¤×™×¨×•×˜ ×©×“×•×ª ×§×œ×˜:</h4>
                        <ul>
                            <li><strong>learned_config</strong> - ×××•×“×•×œ 1 (SupplierDataLearning)</li>
                            <li><strong>docs_list</strong> - ×ª×¢×•×“×•×ª ×–××™× ×•×ª ××”××¢×¨×›×ª</li>
                            <li><strong>import_files</strong> - ×§×‘×¦×™ ×™×‘×•× ×–××™× ×™×</li>
                            <li><strong>vehicles</strong> - ×¨×©×™××ª ×¨×›×‘×™× + ××™×¤×•×™ ×—×©×‘×•× ×•×ª</li>
                            <li><strong>AZURE_RESULT</strong> - ×ª×•×¦××•×ª OCR ××¢×•×‘×“×•×ª</li>
                            <li><strong>AZURE_TEXT_CLEAN</strong> - ×˜×§×¡×˜ × ×§×™</li>
                        </ul>
                    </div>
                </div>

                <button class="collapsible">ğŸ“¤ ×¤×œ×˜ (Output)</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <div class="code-block">
{
  status: "success",
  supplier_identification: {
    supplier_code: "5014",
    supplier_name: "..."
  },
  invoice_data: {
    PINVOICES: [{
      SUPNAME: "5014",
      CODE: "×©\"×—",
      DEBIT: "D",
      IVDATE: "08/07/25",
      BOOKNUM: "286015",
      DETAILS: "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
      PINVOICEITEMS_SUBFORM: [...]
    }]
  },
  validation: {
    all_valid: true,
    checks: {
      required_fields_check: "passed",
      invoice_structure_check: "passed",
      amount_validation: "passed",
      field_mapping: {...}
    }
  },
  execution_report: {...},
  metadata: {...}
}
                        </div>
                    </div>
                </div>
            </div>

            <div id="module3-types">
                <h3>×¡×•×’×™ ×—×©×‘×•× ×™×•×ª</h3>

                <button class="collapsible">ğŸš— ×—×©×‘×•× ×™×•×ª ×¨×›×‘×™×</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <h4>×××¤×™×™× ×™×:</h4>
                        <ul>
                            <li>check_vehicles: true ×‘-processing_scenario</li>
                            <li>vehicles input ×¢× ××™×¤×•×™ ×¨×›×‘×™×</li>
                            <li>PINVOICEITEMS_SUBFORM ×¢× ×¤×¨×™×˜ ×œ×›×œ ×¨×›×‘</li>
                            <li>DETAILS = PDES ×©×œ ×©×•×¨×” 1</li>
                        </ul>

                        <h4>×œ×•×’×™×§×” ××™×•×—×“×ª:</h4>
                        <ul>
                            <li><strong>PDES</strong> - ×ª×™××•×¨ ××•×¦×¨×™× ×××™×ª×™×™× (×œ× "×¢×‘×•×“×”")</li>
                            <li><strong>ACCNAME</strong> - ××™×¤×•×™ ×œ×¤×™ ××¡×¤×¨ ×¨×›×‘</li>
                            <li><strong>PRICE</strong> - SubTotal / ×›××•×ª ×¨×›×‘×™×</li>
                            <li><strong>DETAILS</strong> - PDES ×©×œ ×”×¤×¨×™×˜ ×”×¨××©×•×Ÿ</li>
                        </ul>

                        <div class="code-block">
{
  PINVOICES: [{
    SUPNAME: "5014",
    IVDATE: "08/07/25",
    BOOKNUM: "286015",
    DETAILS: "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
    PINVOICEITEMS_SUBFORM: [{
      PARTNAME: "car",
      PDES: "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
      ACCNAME: "66910",
      TQUANT: 1,
      PRICE: 1150,
      VATFLAG: "Y"
    }]
  }]
}
                        </div>
                    </div>
                </div>

                <button class="collapsible">ğŸ“„ ×—×©×‘×•× ×™×•×ª ×¢× ×ª×¢×•×“×•×ª</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <h4>×××¤×™×™× ×™×:</h4>
                        <ul>
                            <li>check_docs: true ×‘-processing_scenario</li>
                            <li>docs_list input ×¢× ×ª×¢×•×“×•×ª ×–××™× ×•×ª</li>
                            <li>DOCNO ××• PIVDOC_SUBFORM</li>
                            <li>×œ×œ× PINVOICEITEMS_SUBFORM</li>
                        </ul>

                        <h4>×ª×¢×•×“×” ×™×—×™×“×” vs ××¨×•×‘×•×ª:</h4>
                        <ul>
                            <li><strong>×ª×¢×•×“×” ×™×—×™×“×”:</strong> DOCNO ×‘×©×“×” ×¨×’×™×œ</li>
                            <li><strong>×ª×¢×•×“×•×ª ××¨×•×‘×•×ª:</strong> PIVDOC_SUBFORM</li>
                        </ul>

                        <div class="code-block">
// ×ª×¢×•×“×•×ª ××¨×•×‘×•×ª:
{
  PINVOICES: [{
    SUPNAME: "2511",
    BOOKNUM: "60000013",
    PIVDOC_SUBFORM: [
      { DOCNO: "25026849", BOOKNUM: "108379736" },
      { DOCNO: "25026850", BOOKNUM: "108379734" }
    ]
  }]
}
                        </div>
                    </div>
                </div>

                <button class="collapsible">ğŸ“¦ ×—×©×‘×•× ×™×•×ª ×™×‘×•×</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <h4>×××¤×™×™× ×™×:</h4>
                        <ul>
                            <li>check_import: true</li>
                            <li>import_files input</li>
                            <li>IMPFNUM ×‘×©×“×” ×¨×’×™×œ</li>
                        </ul>

                        <div class="code-block">
{
  PINVOICES: [{
    SUPNAME: "...",
    IMPFNUM: "2024/12345"
  }]
}
                        </div>
                    </div>
                </div>

                <button class="collapsible">ğŸ“‹ ×—×©×‘×•× ×™×•×ª ×¨×’×™×œ×•×ª</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <h4>×××¤×™×™× ×™×:</h4>
                        <ul>
                            <li>×œ×œ× ×ª×¢×•×“×•×ª/×¨×›×‘×™×/×™×‘×•×</li>
                            <li>PINVOICEITEMS_SUBFORM ×-OCR Items</li>
                            <li>××• ×œ×œ× ×¤×¨×™×˜×™× (×¨×§ ×¡×›×•× ×›×•×œ×œ)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="module3-fields">
                <h3>×©×“×•×ª - Drill Down ××œ×</h3>

                <div class="field-list">
                    <div class="field-item">
                        <strong>SUPNAME</strong> <span class="badge badge-template">Template</span>
                        <p>×§×•×“ ×¡×¤×§ ×‘-Priority</p>
                        <div class="code-block">SUPNAME: template.SUPNAME || config.supplier_config.supplier_code</div>
                    </div>

                    <div class="field-item">
                        <strong>CODE</strong> <span class="badge badge-template">Template</span>
                        <p>×§×•×“ ××˜×‘×¢</p>
                        <div class="code-block">CODE: template.CODE || "×©\"×—"</div>
                    </div>

                    <div class="field-item">
                        <strong>DEBIT</strong> <span class="badge badge-calculated">Calculated</span>
                        <p>×¡×•×’ ×–×™×›×•×™/×—×™×•×‘ (D/C)</p>
                        <ul>
                            <li>×‘×•×“×§ InvoiceId ×¢×‘×•×¨ "×–×™×›×•×™" ××• "credit"</li>
                            <li>×‘×•×“×§ InvoiceTotal_amount - ×× ×©×œ×™×œ×™ = ×–×™×›×•×™</li>
                            <li>×‘×¨×™×¨×ª ××—×“×œ: structure.debit_type</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>IVDATE</strong> <span class="badge badge-ocr">OCR</span>
                        <p>×ª××¨×™×š ×—×©×‘×•× ×™×ª (DD/MM/YY)</p>
                        <div class="code-block">
// OCR: "2025-07-08" â†’ "08/07/25"
IVDATE: formatDateToPriority(ocrFields.InvoiceDate)
                        </div>
                    </div>

                    <div class="field-item">
                        <strong>BOOKNUM</strong> <span class="badge badge-ocr">OCR</span>
                        <p>××¡×¤×¨ ×—×©×‘×•× ×™×ª (×œ××—×¨ × ×™×§×•×™)</p>
                        <div class="code-block">
// OCR: "286015 NS" â†’ "286015"
BOOKNUM: cleanBooknum(ocrFields.InvoiceId)
                        </div>
                    </div>

                    <div class="field-item">
                        <strong>DETAILS</strong> <span class="badge badge-ocr">First Item PDES</span>
                        <p>×¤×¨×˜×™× × ×•×¡×¤×™×</p>
                        <ul>
                            <li>×‘×¨×›×‘×™×: PDES ×©×œ ×”×¤×¨×™×˜ ×”×¨××©×•×Ÿ</li>
                            <li>×‘×—×©×‘×•× ×™×•×ª ×¨×’×™×œ×•×ª: InvoiceDescription ×-OCR ××• ×©×•×¨×” 3 ×-AZURE_TEXT</li>
                            <li>××¡× ×Ÿ "×¢×‘×•×“×”" ×›×œ×œ×™×ª</li>
                        </ul>
                        <div class="code-block">
// ×‘×¨×›×‘×™×:
DETAILS = PINVOICEITEMS_SUBFORM[0].PDES
                        </div>
                    </div>

                    <div class="field-item">
                        <strong>ORDNAME</strong> <span class="badge badge-ocr">OCR</span>
                        <p>××¡×¤×¨ ×”×–×× ×” (××•×¤×¦×™×•× ×œ×™)</p>
                        <div class="code-block">ORDNAME: ocrFields.PurchaseOrder || null</div>
                    </div>

                    <div class="field-item">
                        <strong>DOCNO</strong> <span class="badge badge-search">Documents Search</span>
                        <p>××¡×¤×¨ ×ª×¢×•×“×” (×× ×™×© ×ª×¢×•×“×” ×™×—×™×“×”)</p>
                        <ul>
                            <li>××—×¤×© BOOKNUM ×‘-UnidentifiedNumbers</li>
                            <li>××ª××™× ×¢× docs_list</li>
                            <li>×× ×™×•×ª×¨ ××ª×¢×•×“×” ××—×ª â†’ PIVDOC_SUBFORM</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>IMPFNUM</strong> <span class="badge badge-search">Import Search</span>
                        <p>××¡×¤×¨ ×™×‘×•× (×× ×™×©)</p>
                    </div>
                </div>
            </div>

            <div id="module3-items">
                <h3>×¤×¨×™×˜×™× - PINVOICEITEMS_SUBFORM</h3>

                <h4>×©×“×•×ª ×‘×›×œ ×¤×¨×™×˜:</h4>

                <table>
                    <thead>
                        <tr>
                            <th>×©×“×”</th>
                            <th>×ª×™××•×¨</th>
                            <th>××§×•×¨</th>
                            <th>×“×•×’××”</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>PARTNAME</strong></td>
                            <td>×¡×•×’ ×¤×¨×™×˜</td>
                            <td>×ª×‘× ×™×ª / "car"</td>
                            <td>"car"</td>
                        </tr>
                        <tr>
                            <td><strong>PDES</strong></td>
                            <td>×ª×™××•×¨ ×¤×¨×™×˜</td>
                            <td>OCR Items / ×¨×›×‘</td>
                            <td>"×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•"</td>
                        </tr>
                        <tr>
                            <td><strong>TQUANT</strong></td>
                            <td>×›××•×ª</td>
                            <td>OCR / 1</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td><strong>TUNITNAME</strong></td>
                            <td>×™×—×™×“×ª ××™×“×”</td>
                            <td>×ª×‘× ×™×ª</td>
                            <td>"×™×—'"</td>
                        </tr>
                        <tr>
                            <td><strong>PRICE</strong></td>
                            <td>××—×™×¨ ×œ×™×—×™×“×”</td>
                            <td>×—×™×©×•×‘</td>
                            <td>1150</td>
                        </tr>
                        <tr>
                            <td><strong>VATFLAG</strong></td>
                            <td>××¢×</td>
                            <td>×ª×‘× ×™×ª / mapping</td>
                            <td>"Y"</td>
                        </tr>
                        <tr>
                            <td><strong>ACCNAME</strong></td>
                            <td>××¡×¤×¨ ×—×©×‘×•×Ÿ</td>
                            <td>×ª×‘× ×™×ª / mapping</td>
                            <td>"66910"</td>
                        </tr>
                    </tbody>
                </table>

                <h4>×‘×¨×›×‘×™× - ×œ×•×’×™×§×” ××™×•×—×“×ª:</h4>

                <div class="success-box">
                    <strong>âœ… PDES ××ª×™××•×¨ ××•×¦×¨×™× ×××™×ª×™×™×:</strong><br>
                    1. ×œ×•×§×— ××ª ×›×œ ×”-Items ×-OCR<br>
                    2. ×××™×™×Ÿ ×œ×¤×™ Amount (×”×’×‘×•×” ×‘×™×•×ª×¨ ×§×•×“×)<br>
                    3. ××¡× ×Ÿ ×¤×¨×™×˜×™× ×’× ×¨×™×™× ("×¢×‘×•×“×”", "work", "labor")<br>
                    4. ×œ×•×§×— ×¢×“ 3 ×ª×™××•×¨×™× ××©××¢×•×ª×™×™×<br>
                    5. ××—×‘×¨ ×¢× "+"
                </div>

                <div class="code-block">
// ×“×•×’××”:
// Items: [
//   { Description: "×¢×‘×•×“×”", Amount: 150 },
//   { Description: "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO", Amount: 650 },
//   { Description: "××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•", Amount: 350 }
// ]
//
// PDES = "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•"
                </div>

                <div class="success-box">
                    <strong>âœ… PRICE = SubTotal / ×›××•×ª ×¨×›×‘×™×:</strong><br>
                    1. ××—×©×‘ SubTotal = InvoiceTotal - TotalTax<br>
                    2. ××—×œ×§ ×‘×›××•×ª ×”×¨×›×‘×™×<br>
                    3. ×–×” ××‘×˜×™×— ×©××™××•×ª ×”×¡×›×•× ×™×¦×œ×™×— (0% ×”×¤×¨×©)
                </div>

                <div class="code-block">
// InvoiceTotal = 1357 (×›×•×œ×œ ××¢×)
// TotalTax = 207
// SubTotal = 1150
// Vehicles = 1
// PRICE = 1150 / 1 = 1150 âœ…
                </div>
            </div>

            <div id="module3-validation">
                <h3>×‘×“×™×§×•×ª ×•-Validation</h3>

                <h4>checks - ×‘×“×™×§×•×ª ××•×˜×•××˜×™×•×ª:</h4>

                <div class="field-list">
                    <div class="field-item">
                        <strong>required_fields_check</strong>
                        <p>×‘×•×“×§ ×©×›×œ ×”×©×“×•×ª ×”×—×•×‘×” ×§×™×™××™×:</p>
                        <ul>
                            <li>SUPNAME</li>
                            <li>IVDATE</li>
                            <li>BOOKNUM</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>invoice_structure_check</strong>
                        <p>×‘×•×“×§ ××‘× ×” ×ª×§×™×Ÿ:</p>
                        <ul>
                            <li>×™×© PINVOICES</li>
                            <li>PINVOICES ×”×•× array</li>
                            <li>×™×© ×œ×¤×—×•×ª ×—×©×‘×•× ×™×ª ××—×ª</li>
                        </ul>
                    </div>

                    <div class="field-item">
                        <strong>amount_validation</strong>
                        <p>××©×•×•×” ×¡×›×•××™×:</p>
                        <ul>
                            <li>××—×©×‘ ×¡×›×•× ×›×•×œ×œ ××”×¤×¨×™×˜×™×</li>
                            <li>××©×•×•×” ×œ-SubTotal ×-OCR</li>
                            <li>××—×©×‘ ××—×•×– ×”×¤×¨×©</li>
                            <li>×××©×¨ ×× ×”×”×¤×¨×© ×§×˜×Ÿ ×-2%</li>
                        </ul>
                        <div class="code-block">
// âœ… ×¡×›×•× ×ª×§×™×Ÿ: 1150.00 ×©"×— (0.0% ×”×¤×¨×©)
// âš ï¸ ×”×¤×¨×© ×¡×›×•××™×: 1200.00 vs 1150.00 (4.3%)
                        </div>
                    </div>

                    <div class="field-item">
                        <strong>field_mapping</strong>
                        <p>××¢×§×‘ ××§×•×¨×•×ª × ×ª×•× ×™× - ××¨××” ×œ×›×œ ×©×“×”:</p>
                        <ul>
                            <li><strong>source</strong> - ××”×™×›×Ÿ ×”×’×™×¢ ×”×¢×¨×š</li>
                            <li><strong>value</strong> - ×”×¢×¨×š ×”×¡×•×¤×™</li>
                            <li><strong>ocr_value</strong> - ×”×¢×¨×š ×”××§×•×¨×™ ×-OCR (×× ×¨×œ×•×•× ×˜×™)</li>
                            <li><strong>field</strong> - ×©× ×”×©×“×” ×‘××§×•×¨</li>
                        </ul>
                    </div>
                </div>

                <button class="collapsible">×“×•×’××” - field_mapping ××œ×</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <div class="code-block">
{
  "field_mapping": {
    "SUPNAME": {
      "source": "Template",
      "field": "supplier_code",
      "value": "5014"
    },
    "CODE": {
      "source": "Template",
      "value": "×©\"×—"
    },
    "DEBIT": {
      "source": "Template",
      "value": "D"
    },
    "IVDATE": {
      "source": "OCR",
      "field": "InvoiceDate",
      "value": "08/07/25",
      "ocr_value": "2025-07-08"
    },
    "BOOKNUM": {
      "source": "OCR",
      "field": "InvoiceId",
      "value": "286015",
      "ocr_value": "286015 NS"
    },
    "DETAILS": {
      "source": "First Item PDES",
      "value": "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•"
    },
    "PINVOICEITEMS_SUBFORM": {
      "source": "Vehicle Items",
      "vehicle_numbers": ["419-29-702"],
      "count": 1,
      "items": [{
        "PDES": "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
        "ACCNAME": "66910",
        "PRICE": 1150
      }]
    }
  }
}
                        </div>
                    </div>
                </div>
            </div>

            <div id="module3-metadata">
                <h3>Metadata - ××™×“×¢ × ×•×¡×£</h3>

                <p>metadata ××›×™×œ ××™×“×¢ ×©×™××•×©×™ ×œ×“×™×‘××’ ×•××¢×§×‘:</p>

                <div class="field-list">
                    <div class="field-item">
                        <strong>ocr_invoice_id</strong> - ××¡×¤×¨ ×—×©×‘×•× ×™×ª ××§×•×¨×™ ×-OCR
                    </div>
                    <div class="field-item">
                        <strong>ocr_invoice_date</strong> - ×ª××¨×™×š ××§×•×¨×™ ×-OCR
                    </div>
                    <div class="field-item">
                        <strong>ocr_total_amount</strong> - ×¡×›×•× ×›×•×œ×œ (×›×•×œ×œ ××¢×)
                    </div>
                    <div class="field-item">
                        <strong>ocr_subtotal</strong> - ×¡×›×•× ×œ×¤× ×™ ××¢×
                    </div>
                    <div class="field-item">
                        <strong>ocr_tax</strong> - ×¡×›×•× ××¢×
                    </div>
                    <div class="field-item">
                        <strong>processing_timestamp</strong> - ×–××Ÿ ×¢×™×‘×•×“
                    </div>
                    <div class="field-item">
                        <strong>version</strong> - ×’×¨×¡×ª ×”×§×•×“
                    </div>
                    <div class="field-item">
                        <strong>template_index</strong> - ××™×–×• ×ª×‘× ×™×ª × ×‘×—×¨×”
                    </div>
                    <div class="field-item">
                        <strong>template_type</strong> - ×¡×•×’ ×”×ª×‘× ×™×ª (vehicles/docs_only/regular/import)
                    </div>
                    <div class="field-item">
                        <strong>has_vehicles</strong> - ×”×× ×™×© ×¨×›×‘×™×
                    </div>
                    <div class="field-item">
                        <strong>vehicle_numbers</strong> - ×¨×©×™××ª ××¡×¤×¨×™ ×¨×›×‘×™×
                    </div>
                    <div class="field-item">
                        <strong>vehicle_count</strong> - ×›××•×ª ×¨×›×‘×™×
                    </div>
                    <div class="field-item">
                        <strong>has_documents</strong> - ×”×× ×™×© ×ª×¢×•×“×•×ª
                    </div>
                    <div class="field-item">
                        <strong>document_count</strong> - ×›××•×ª ×ª×¢×•×“×•×ª
                    </div>
                    <div class="field-item">
                        <strong>has_import</strong> - ×”×× ×™×© ×™×‘×•×
                    </div>
                </div>
            </div>

            <div id="module3-mapping">
                <h3>Field Mapping - ××¢×§×‘ ××§×•×¨×•×ª</h3>

                <p>field_mapping ××¡×¤×§ ×©×§×™×¤×•×ª ××œ××” ×¢×œ ××§×•×¨ ×›×œ ×¢×¨×š ×‘JSON:</p>

                <h4>×¡×•×’×™ ××§×•×¨×•×ª:</h4>
                <ul>
                    <li><span class="badge badge-ocr">OCR</span> - × ×œ×§×— ×™×©×™×¨×•×ª ×-AZURE_RESULT</li>
                    <li><span class="badge badge-template">Template</span> - × ×œ×§×— ××”×ª×‘× ×™×ª</li>
                    <li><span class="badge badge-calculated">Calculated</span> - ×—×•×©×‘ ×œ×¤×™ ×œ×•×’×™×§×”</li>
                    <li><span class="badge badge-search">Search</span> - × ××¦× ×‘×—×™×¤×•×© (×ª×¢×•×“×•×ª/×¨×›×‘×™×/×™×‘×•×)</li>
                </ul>

                <h4>××‘× ×” field_mapping:</h4>
                <div class="code-block">
{
  "FIELD_NAME": {
    "source": "OCR" | "Template" | "Calculated" | "Search",
    "field": "×©× ×”×©×“×” ×‘××§×•×¨",    // ××•×¤×¦×™×•× ×œ×™
    "value": "×”×¢×¨×š ×”×¡×•×¤×™",
    "ocr_value": "×¢×¨×š ××§×•×¨×™"      // ×¨×§ ×œ-OCR
  }
}
                </div>

                <div class="success-box">
                    <strong>âœ… ×™×ª×¨×•× ×•×ª:</strong><br>
                    â€¢ ×©×§×™×¤×•×ª ××œ××” ×¢×œ ××§×•×¨ ×›×œ × ×ª×•×Ÿ<br>
                    â€¢ ×§×œ ×œ×“×™×‘××’ ×‘×¢×™×•×ª<br>
                    â€¢ ×××¤×©×¨ ××¢×§×‘ ×©×™× ×•×™×™×<br>
                    â€¢ ×¢×•×–×¨ ×‘×œ××™×“×” ×•×©×™×¤×•×¨
                </div>
            </div>
        </section>

        <!-- WORKFLOW -->
        <section id="workflow">
            <h2>6. ğŸ”„ ×ª×”×œ×™×š ×¢×‘×•×“×” ××œ×</h2>

            <h3>×¡×¤×§ ×—×“×© - ×ª×”×œ×™×š ××œ×:</h3>

            <div class="flow-box">
                <strong>×©×œ×‘ 0: ×”×›× ×” (×¤×¢× ××—×ª ×œ×¡×¤×§)</strong>
                <ol>
                    <li>×§×‘×œ ×“×•×’×××•×ª ×—×©×‘×•× ×™×•×ª ×-Priority</li>
                    <li>×”×¨×¥ SupplierDataLearning â†’ learned_config</li>
                    <li>×©××•×¨ ××ª ×”-learned_config</li>
                </ol>
            </div>

            <div class="flow-arrow">â¬‡ï¸</div>

            <div class="flow-box">
                <strong>×©×œ×‘ 1: ×œ××™×“×” ××“×•×’××” (×¤×¢× ××—×ª ×œ×¡×¤×§)</strong>
                <ol>
                    <li>×§×‘×œ ×—×©×‘×•× ×™×ª ×“×•×’××”</li>
                    <li>×”×¨×¥ Azure OCR</li>
                    <li>×”×¨×¥ AzureInvoiceProcessor â†’ AZURE_RESULT</li>
                    <li>×”×¨×¥ Processing Invoice â†’ 4 ×¤×œ×˜×™×</li>
                    <li>×©××•×¨ ××ª ×”×”× ×—×™×•×ª</li>
                </ol>
            </div>

            <div class="flow-arrow">â¬‡ï¸</div>

            <div class="flow-box">
                <strong>×©×œ×‘ 2: ×™×™×¦×•×¨ (×›×œ ×—×©×‘×•× ×™×ª ×—×“×©×”)</strong>
                <ol>
                    <li>×§×‘×œ ×—×©×‘×•× ×™×ª ×—×“×©×”</li>
                    <li>×”×¨×¥ Azure OCR</li>
                    <li>×”×¨×¥ AzureInvoiceProcessor â†’ AZURE_RESULT</li>
                    <li>×©×œ×•×£ × ×ª×•× ×™× (docs_list, import_files, vehicles)</li>
                    <li>×”×¨×¥ Production Invoice â†’ JSON ×¡×•×¤×™</li>
                    <li>(××•×¤×¦×™×•× ×œ×™) ×”×¨×¥ cleanJson â†’ × ×™×§×•×™</li>
                    <li>×©×œ×— ×œ-Priority</li>
                </ol>
            </div>

            <h3>×“×•×’××”: ×¡×¤×§ 5014 + ×¨×›×‘ 419-29-702</h3>

            <button class="collapsible">×ª×”×œ×™×š ××œ× - ×¦×¢×“ ××—×¨ ×¦×¢×“</button>
            <div class="collapsible-content">
                <div class="collapsible-content-inner">
                    <h4>1. ×§×œ×˜:</h4>
                    <ul>
                        <li>×¡×¤×§: 5014</li>
                        <li>×¨×›×‘: 419-29-702</li>
                        <li>×—×©×‘×•× ×™×ª: 286015</li>
                        <li>×ª××¨×™×š: 08/07/25</li>
                        <li>×¡×›×•× ×›×•×œ×œ: 1357 (×›×•×œ×œ ××¢×)</li>
                        <li>××¢×: 207</li>
                        <li>×¤×¨×™×˜×™×:</li>
                        <ul>
                            <li>×¢×‘×•×“×” - 150 â‚ª</li>
                            <li>×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO - 650 â‚ª</li>
                            <li>××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×• - 350 â‚ª</li>
                        </ul>
                    </ul>

                    <h4>2. ×–×™×”×•×™ ×ª×‘× ×™×ª:</h4>
                    <p>××¦× check_vehicles: true â†’ ×ª×‘× ×™×ª ×¨×›×‘×™×</p>

                    <h4>3. ×—×™×¤×•×© ×¨×›×‘:</h4>
                    <p>××¦× "419-29-702" ×‘-AZURE_TEXT_CLEAN</p>
                    <p>××™×¤×•×™: ACCNAME = 66910</p>

                    <h4>4. ×‘× ×™×™×ª PDES:</h4>
                    <ul>
                        <li>×××™×™×Ÿ ×¤×¨×™×˜×™× ×œ×¤×™ ×¡×›×•×: 650, 350, 150</li>
                        <li>××¡× ×Ÿ "×¢×‘×•×“×”"</li>
                        <li>×œ×•×§×— 2 ×”×¨××©×•× ×™×: "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO", "××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•"</li>
                        <li>××—×‘×¨: "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•"</li>
                    </ul>

                    <h4>5. ×—×™×©×•×‘ PRICE:</h4>
                    <ul>
                        <li>SubTotal = 1357 - 207 = 1150</li>
                        <li>Vehicles = 1</li>
                        <li>PRICE = 1150 / 1 = 1150</li>
                    </ul>

                    <h4>6. DETAILS:</h4>
                    <ul>
                        <li>DETAILS = PINVOICEITEMS_SUBFORM[0].PDES</li>
                        <li>DETAILS = "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•"</li>
                    </ul>

                    <h4>7. ××™××•×ª:</h4>
                    <ul>
                        <li>×¡×›×•× ××”×¤×¨×™×˜×™×: 1150</li>
                        <li>SubTotal ×-OCR: 1150</li>
                        <li>×”×¤×¨×©: 0.0% âœ…</li>
                    </ul>

                    <h4>8. ×¤×œ×˜ ×¡×•×¤×™:</h4>
                    <div class="code-block">
{
  PINVOICES: [{
    SUPNAME: "5014",
    CODE: "×©\"×—",
    DEBIT: "D",
    IVDATE: "08/07/25",
    BOOKNUM: "286015",
    DETAILS: "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
    PINVOICEITEMS_SUBFORM: [{
      PARTNAME: "car",
      PDES: "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
      TQUANT: 1,
      TUNITNAME: "×™×—'",
      PRICE: 1150,
      VATFLAG: "Y",
      ACCNAME: "66910"
    }]
  }]
}
                    </div>
                </div>
            </div>
        </section>

        <!-- EXAMPLES -->
        <section id="examples">
            <h2>7. ğŸ“š ×“×•×’×××•×ª ××œ××•×ª</h2>

            <button class="collapsible">×“×•×’××” 1: ×¡×¤×§ 2511 - ×—×©×‘×•× ×™×ª ×¢× 4 ×ª×¢×•×“×•×ª</button>
            <div class="collapsible-content">
                <div class="collapsible-content-inner">
                    <h4>×§×œ×˜:</h4>
                    <div class="code-block">
Supplier: 2511 (×¤×œ×¡××•×Ÿ ×‘×¢"×)
Invoice: 60000013
Date: 28/10/25
Total: 50,000 â‚ª

×ª×¢×•×“×•×ª ×©× ××¦××• ×‘-UnidentifiedNumbers:
- 108379736
- 108379734
- 108367753
- 108367755

docs_list ××”××¢×¨×›×ª:
[
  { DOCNO: "25026849", BOOKNUM: "108379736" },
  { DOCNO: "25026850", BOOKNUM: "108379734" },
  { DOCNO: "25026832", BOOKNUM: "108367753" },
  { DOCNO: "25026831", BOOKNUM: "108367755" }
]
                    </div>

                    <h4>×¤×œ×˜:</h4>
                    <div class="code-block">
{
  PINVOICES: [{
    SUPNAME: "2511",
    CODE: "×©\"×—",
    DEBIT: "D",
    IVDATE: "28/10/25",
    BOOKNUM: "60000013",
    PIVDOC_SUBFORM: [
      { DOCNO: "25026849", BOOKNUM: "108379736" },
      { DOCNO: "25026850", BOOKNUM: "108379734" },
      { DOCNO: "25026832", BOOKNUM: "108367753" },
      { DOCNO: "25026831", BOOKNUM: "108367755" }
    ]
  }]
}
                    </div>

                    <h4>field_mapping:</h4>
                    <div class="code-block">
{
  "PIVDOC_SUBFORM": {
    "source": "Documents Search",
    "found_in_ocr": ["108379736", "108379734", "108367753", "108367755"],
    "matched_from_docs_list": 4,
    "count": 4
  }
}
                    </div>
                </div>
            </div>

            <button class="collapsible">×“×•×’××” 2: ×¡×¤×§ 5014 - ×—×©×‘×•× ×™×ª ×¨×›×‘</button>
            <div class="collapsible-content">
                <div class="collapsible-content-inner">
                    <h4>×¤×œ×˜ ××œ× (×›×¤×™ ×©×¨××™× ×• ×§×•×“×):</h4>
                    <div class="code-block">
{
  "status": "success",
  "supplier_identification": {
    "supplier_code": "5014",
    "supplier_name": "..."
  },
  "invoice_data": {
    "PINVOICES": [{
      "SUPNAME": "5014",
      "CODE": "×©\"×—",
      "DEBIT": "D",
      "IVDATE": "08/07/25",
      "BOOKNUM": "286015",
      "DETAILS": "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
      "PINVOICEITEMS_SUBFORM": [{
        "PARTNAME": "car",
        "PDES": "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
        "TQUANT": 1,
        "TUNITNAME": "×™×—'",
        "PRICE": 1150,
        "VATFLAG": "Y",
        "ACCNAME": "66910"
      }]
    }]
  },
  "validation": {
    "all_valid": true,
    "checks": {
      "required_fields_check": "passed",
      "invoice_structure_check": "passed",
      "amount_validation": "passed",
      "field_mapping": {
        "SUPNAME": {
          "source": "Template",
          "field": "supplier_code",
          "value": "5014"
        },
        "DETAILS": {
          "source": "First Item PDES",
          "value": "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•"
        },
        "PINVOICEITEMS_SUBFORM": {
          "source": "Vehicle Items",
          "vehicle_numbers": ["419-29-702"],
          "count": 1,
          "items": [{
            "PDES": "×©×œ×˜ ×¨××¤×” ××œ×—×•×˜×™ GALILO+ ××›×¡×” ×¡×•×œ×¨ ××™×¡×•×–×•",
            "ACCNAME": "66910",
            "PRICE": 1150
          }]
        }
      }
    },
    "warnings": [
      "âœ… ×¡×›×•× ×ª×§×™×Ÿ: 1150.00 ×©\"×— (0.0% ×”×¤×¨×©)"
    ]
  },
  "metadata": {
    "ocr_invoice_id": "286015 NS",
    "ocr_invoice_date": "2025-07-08",
    "ocr_total_amount": 1357,
    "ocr_subtotal": 1150,
    "ocr_tax": 207,
    "processing_timestamp": "2025-11-06T12:15:00.000Z",
    "version": "1.7.2",
    "template_index": 0,
    "template_type": "vehicles",
    "has_vehicles": true,
    "vehicle_numbers": ["419-29-702"],
    "vehicle_count": 1,
    "has_documents": false,
    "document_count": 0,
    "has_import": false
  }
}
                    </div>
                </div>
            </div>
        </section>

        <!-- TROUBLESHOOTING -->
        <section id="troubleshooting">
            <h2>8. ğŸ”§ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª</h2>

            <h3>×‘×¢×™×•×ª × ×¤×•×¦×•×ª ×•×¤×ª×¨×•× ×•×ª:</h3>

            <div class="warning-box">
                <strong>âš ï¸ ×‘×¢×™×”: ×—×©×‘×•× ×™×ª ×œ× ××¢×•×‘×“×ª × ×›×•×Ÿ</strong>
                <h4>×¦×¢×“×™ ×“×™×‘××’:</h4>
                <ol>
                    <li>×‘×“×•×§ AZURE_RESULT - ×”×× ×”-OCR ×ª×§×™×Ÿ?</li>
                    <li>×‘×“×•×§ learned_config - ×”×× ×™×© ×ª×‘× ×™×ª ××ª××™××”?</li>
                    <li>×”×¨×¥ Processing Invoice ×‘××¦×‘ debug</li>
                    <li>×‘×“×•×§ execution_report</li>
                    <li>×‘×“×•×§ field_mapping - ×××™×¤×” ×›×œ ×¢×¨×š ×‘×?</li>
                </ol>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ ×‘×¢×™×”: ×ª×¢×•×“×•×ª ×œ× × ××¦××•×ª</strong>
                <h4>×¤×ª×¨×•×Ÿ:</h4>
                <ol>
                    <li>×‘×“×•×§ AzureInvoiceProcessor - BOOKNUM ×‘-UnidentifiedNumbers?</li>
                    <li>×‘×“×•×§ docs_list - ×”×ª×¢×•×“×•×ª ×§×™×™××•×ª?</li>
                    <li>×‘×“×•×§ Production Invoice - ×”×”×ª×××” ×¢×•×‘×“×ª?</li>
                    <li>×‘×“×•×§ field_mapping.DOCNO ××• PIVDOC_SUBFORM</li>
                </ol>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ ×‘×¢×™×”: ×¨×›×‘×™× ×œ× ××–×•×”×™×</strong>
                <h4>×¤×ª×¨×•×Ÿ:</h4>
                <ol>
                    <li>×‘×“×•×§ AZURE_TEXT_CLEAN - ××¡×¤×¨ ×”×¨×›×‘ ××•×¤×™×¢?</li>
                    <li>×‘×“×•×§ vehicles input - ×”×¨×›×‘ ×‘××™×¤×•×™?</li>
                    <li>×‘×“×•×§ processing_scenario - check_vehicles: true?</li>
                    <li>×‘×“×•×§ field_mapping.PINVOICEITEMS_SUBFORM</li>
                </ol>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ ×‘×¢×™×”: ×”×¤×¨×© ×¡×›×•××™×</strong>
                <h4>×¤×ª×¨×•×Ÿ:</h4>
                <ol>
                    <li>×‘×“×•×§ metadata.ocr_subtotal - ×–×” SubTotal (×œ×¤× ×™ ××¢×)?</li>
                    <li>×‘×“×•×§ metadata.ocr_tax - ×¡×›×•× ×”××¢× × ×›×•×Ÿ?</li>
                    <li>×‘×“×•×§ PRICE ×©×œ ×”×¤×¨×™×˜×™× - ×”×× ×—×™×©×•×‘ × ×›×•×Ÿ?</li>
                    <li>×‘×¨×›×‘×™×: PRICE = SubTotal / ×›××•×ª ×¨×›×‘×™×</li>
                    <li>×‘×“×•×§ validation.checks.amount_validation</li>
                </ol>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ ×‘×¢×™×”: DETAILS ×¨×™×§ ××• ×œ× ×”×’×™×•× ×™</strong>
                <h4>×¤×ª×¨×•×Ÿ:</h4>
                <ol>
                    <li>×‘×¨×›×‘×™×: DETAILS ×¦×¨×™×š ×œ×”×™×•×ª = PDES ×©×œ ×©×•×¨×” 1</li>
                    <li>×‘×“×•×§ PINVOICEITEMS_SUBFORM[0].PDES - ××” ×”×¢×¨×š?</li>
                    <li>×‘×“×•×§ field_mapping.DETAILS - ××” ×”××§×•×¨?</li>
                    <li>×× "×¢×‘×•×“×”" ×›×œ×œ×™×ª - ×–×” ××¡×•× ×Ÿ, ×¦×¨×™×š PDES ×××™×ª×™</li>
                </ol>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ ×‘×¢×™×”: PDES ××¦×™×’ ×©× ×—×©×‘×•×Ÿ ×‘××§×•× ×ª×™××•×¨ ××•×¦×¨</strong>
                <h4>×¤×ª×¨×•×Ÿ:</h4>
                <ol>
                    <li>×‘×“×•×§ AZURE_RESULT.data.Items - ×™×© ×ª×™××•×¨×™ ××•×¦×¨×™×?</li>
                    <li>×‘×“×•×§ ×©×”×§×•×“ ×××™×™×Ÿ ×œ×¤×™ Amount ×•×œ×•×§×— ××ª ×”×’×‘×•×”×™×</li>
                    <li>×‘×“×•×§ ×©×”×§×•×“ ××¡× ×Ÿ "×¢×‘×•×“×”" ×’× ×¨×™×ª</li>
                    <li>PDES ×¦×¨×™×š ×œ×”×™×•×ª ××—×™×‘×•×¨ ×©×œ ×ª×™××•×¨×™× ×××™×ª×™×™×</li>
                </ol>
            </div>

            <h3>×˜×™×¤×™× ×›×œ×œ×™×™×:</h3>

            <div class="success-box">
                <strong>âœ… ×©×™××•×© ×‘-field_mapping:</strong><br>
                field_mapping ×”×•× ×”×›×œ×™ ×”×›×™ ×˜×•×‘ ×œ×“×™×‘××’!<br>
                ×”×•× ××¨××” ×‘×“×™×•×§ ×××™×¤×” ×›×œ ×¢×¨×š ×‘× ×•××” ×”×™×” ×”×¢×¨×š ×”××§×•×¨×™.
            </div>

            <div class="success-box">
                <strong>âœ… ×©×™××•×© ×‘-metadata:</strong><br>
                metadata ××›×™×œ ××™×“×¢ ×—×©×•×‘ ×¢×œ ×”×¢×™×‘×•×“:<br>
                â€¢ template_type - ××™×–×” ×¡×•×’ ×—×©×‘×•× ×™×ª ×–×”<br>
                â€¢ has_vehicles/documents/import - ××” × ××¦×<br>
                â€¢ ocr_subtotal/tax - ×¡×›×•××™× ××§×•×¨×™×™×
            </div>

            <div class="success-box">
                <strong>âœ… ×©×™××•×© ×‘-execution_report:</strong><br>
                execution_report ××›×™×œ ×œ×•×’×™× ××¤×•×¨×˜×™× ×©×œ ×”×ª×”×œ×™×š.<br>
                ×¢×•×–×¨ ×œ×”×‘×™×Ÿ ××” ×§×¨×” ×‘×›×œ ×©×œ×‘.
            </div>
        </section>

    </div>

    <footer>
        <p><strong>MakeCode Invoice Processing System</strong></p>
        <p>×’×¨×¡×” 1.7.2 | ×¢×“×›×•×Ÿ ××—×¨×•×Ÿ: 6 × ×•×‘××‘×¨ 2025</p>
        <p>×ª×™×¢×•×“ ××œ× ×•××§×™×£ ×œ×›×œ 3 ×”××•×“×•×œ×™×</p>
    </footer>
</div>

<script>
    // Collapsible sections
    const collapsibles = document.querySelectorAll('.collapsible');

    collapsibles.forEach(button => {
        button.addEventListener('click', function() {
            this.classList.toggle('active');
            const content = this.nextElementSibling;

            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + 'px';
            }
        });
    });

    // Smooth scrolling for nav links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
</script>

</body>
</html>