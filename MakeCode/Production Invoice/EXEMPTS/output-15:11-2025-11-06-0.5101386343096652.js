'{"logs":{"stdout":["v1.7.1: input type = object isArray = false\n","ğŸ” inputData keys: learned_config, docs_list, import_files, vehicles, AZURE_RESULT, AZURE_TEXT_CLEAN, status\n","ğŸ” inputData.input exists? false\n","ğŸ” inputData.AZURE exists? false\n","ğŸ” inputData.SUPNAME exists? false\n","âœ… docs_list parsed: 128 ×ª×¢×•×“×•×ª\n","âœ… vehicles parsed: 173 ×¨×›×‘×™×\n","âœ… Injected 173 vehicles into config\n","ğŸ”§ ×‘×•× ×” structure ××ª×•×š processing_scenario.all_templates\n","âœ… × ×‘× ×• 1 structures: [{\"has_import\":false,\"has_doc\":true,\"has_vehicles\":false,\"debit_type\":\"D\",\"has_budcode\":true,\"inventory_management\":\"not_managed_inventory\"}]\n","ğŸš— vehicleRules: true mapping: 173\n","ğŸ“‹ ×™×© 128 ×ª×¢×•×“×•×ª ×–××™× ×•×ª\n","ğŸ” ××—×¤×© ×‘-0 UnidentifiedNumbers\n","ğŸ” ××—×¤×© fallback ×‘-AZURE_TEXT\n","âœ… ××¦××ª×™ ×ª×¢×•×“×” ×‘×˜×§×¡×˜: 108187003 â†’ 25026251\n","â­ï¸ ×“×™×œ×•×’: 108187003 ×›×‘×¨ ×§×™×™×\n","âœ… ××¦××ª×™ ×ª×¢×•×“×” ×‘×˜×§×¡×˜: 108187002 â†’ 25026403\n","âœ… ××¦××ª×™ ×ª×¢×•×“×” ×‘×˜×§×¡×˜: 1 â†’ 25026048\n","â­ï¸ ×“×™×œ×•×’: 1 ×›×‘×¨ ×§×™×™×\n","ğŸ“Š ×¡×”\"×› ×ª×¢×•×“×•×ª ×©× ××¦××•: 3\n","ğŸ” ××—×¤×© ×ª×¢×•×“×•×ª: × ××¦××• 3\n","BOOKNUM: \"258001431\" â†’ \"258001431\"\n","ğŸ” extractVehiclesAdvanced: vehicleRules=true, mapping=173\n","ğŸš— foundVehicles from OCR: 0\n","ğŸ“ Searching in text: 1314 chars, has 419-29-702: false\n","ğŸ” ×—×™×¤×•×© ×¨×›×‘×™× ×‘×˜×§×¡×˜ (CLEAN)\n","ğŸ“„ ××•×¡×™×£ 3 ×ª×¢×•×“×•×ª\n","âœ… 3 ×ª×¢×•×“×•×ª ×‘-PIVDOC_SUBFORM\n","ğŸ”§ needItems=false (has_doc=true, found docs=3)\n","{\n  \"status\": \"success\",\n  \"supplier_identification\": {\n    \"supplier_code\": \"2511\",\n    \"supplier_name\": \"×¤×œ×¡××•×Ÿ ×‘×¢\\\"×\",\n    \"identification_method\": \"vendor_tax_id\",\n    \"confidence\": \"high\"\n  },\n  \"invoice_data\": {\n    \"PINVOICES\": [\n      {\n        \"SUPNAME\": \"2511\",\n        \"CODE\": \"×©\\\"×—\",\n        \"DEBIT\": \"D\",\n        \"IVDATE\": \"28/09/25\",\n        \"BOOKNUM\": \"258001431\",\n        \"PIVDOC_SUBFORM\": [\n          {\n            \"DOCNO\": \"25026251\",\n            \"BOOKNUM\": \"108187003\"\n          },\n          {\n            \"DOCNO\": \"25026403\",\n            \"BOOKNUM\": \"108187002\"\n          },\n          {\n            \"DOCNO\": \"25026048\",\n            \"BOOKNUM\": \"1\"\n          }\n        ],\n        \"PINVOICESCONT_SUBFORM\": []\n      }\n    ]\n  },\n  \"validation\": {\n    \"all_valid\": true,\n    \"checks\": {\n      \"required_fields_check\": \"passed\",\n      \"invoice_structure_check\": \"passed\",\n      \"amount_validation\": \"no_items\",\n      \"field_mapping\": {\n        \"SUPNAME\": {\n          \"source\": \"Template\",\n          \"field\": \"supplier_code\",\n          \"value\": \"2511\"\n        },\n        \"CODE\": {\n          \"source\": \"Template\",\n          \"value\": \"×©\\\"×—\"\n        },\n        \"DEBIT\": {\n          \"source\": \"Template\",\n          \"value\": \"D\"\n        },\n        \"IVDATE\": {\n          \"source\": \"OCR\",\n          \"field\": \"InvoiceDate\",\n          \"value\": \"28/09/25\",\n          \"ocr_value\": \"2025-09-28\"\n        },\n        \"BOOKNUM\": {\n          \"source\": \"OCR\",\n          \"field\": \"InvoiceId\",\n          \"value\": \"258001431\",\n          \"ocr_value\": \"258001431\"\n        },\n        \"DETAILS\": {\n          \"source\": \"OCR\"\n        },\n        \"DOCNO\": {\n          \"source\": \"Documents Search\",\n          \"count\": 3\n        }\n      }\n    },\n    \"warnings\": [\n      \"â„¹ï¸ OCR ×–×™×”×” 6 ×¤×¨×™×˜×™× ××‘×œ ×œ× × ×•×¦×¨×•\"\n    ]\n  },\n  \"learning_analysis\": {\n    \"learning_required\": false,\n    \"new_patterns\": {\n      \"new_partnames\": [],\n      \"new_vehicles\": [],\n      \"unknown_accounts\": []\n    },\n    \"learning_instructions\": [],\n    \"recommendation\": \"××™×Ÿ ×¦×•×¨×š ×‘×œ××™×“×”\"\n  },\n  \"execution_report\": {\n    \"stage\": \"×©×œ×‘ 7: × ×™×§×•×™ ×•×”×›× ×” ×œ×¤×¨×™×•×¨×™×˜×™\",\n    \"found\": [\n      \"×¡×•×’: ×™×‘×•×=false, ×ª×¢×•×“×•×ª=true, ×—×™×•×‘/×–×™×›×•×™=D\",\n      \"×ª×‘× ×™×ª: × ××¦××” ×”×ª×××” (index=0)\",\n      \"×“×¤×•×¡×™×: × ××¦××•\",\n      \"×—×•×§×™ ×¨×›×‘×™×: ×¤×¢×™×œ×™× (173 ×¨×›×‘×™×)\",\n      \"booknum: \\\"258001431\\\"\",\n      \"ivdate: \\\"28/09/25\\\"\",\n      \"details: \\\"×¢×œ ×™×“×™ ×’×•×¨× ×××©×¨\\\"\",\n      \"documents: 3 ×¤×¨×™×˜×™×\",\n      \"items: 6 ×¤×¨×™×˜×™×\"\n    ],\n    \"not_found\": [],\n    \"warnings\": [],\n    \"errors\": []\n  },\n  \"metadata\": {\n    \"ocr_invoice_id\": \"258001431\",\n    \"ocr_invoice_date\": \"2025-09-28\",\n    \"ocr_total_amount\": 15399.24,\n    \"ocr_subtotal\": 13050.2,\n    \"ocr_tax\": 2349.04,\n    \"processing_timestamp\": \"2025-11-06T13:36:50.216Z\",\n    \"version\": \"1.0-production\",\n    \"template_index\": 0,\n    \"template_type\": \"docs_only\",\n    \"has_vehicles\": false,\n    \"vehicle_numbers\": [],\n    \"vehicle_count\": 0,\n    \"has_documents\": true,\n    \"document_count\": 3,\n    \"has_import\": false\n  }\n}\n","v1.7.1: items = 0\n","v1.7.1: BOOKNUM = 258001431\n","v1.7.1: DOCNO = undefined\n","==========================================\n"],"stderr":[]},"executionTimeMs":1309,"result":{"status":"success","supplier_identification":{"supplier_code":"2511","supplier_name":"×¤×œ×¡××•×Ÿ ×‘×¢\"×","identification_method":"vendor_tax_id","confidence":"high"},"invoice_data":{"PINVOICES":[{"SUPNAME":"2511","CODE":"×©\"×—","DEBIT":"D","IVDATE":"28/09/25","BOOKNUM":"258001431","PIVDOC_SUBFORM":[{"DOCNO":"25026251","BOOKNUM":"108187003"},{"DOCNO":"25026403","BOOKNUM":"108187002"},{"DOCNO":"25026048","BOOKNUM":"1"}],"PINVOICESCONT_SUBFORM":[]}]},"validation":{"all_valid":true,"checks":{"required_fields_check":"passed","invoice_structure_check":"passed","amount_validation":"no_items","field_mapping":{"SUPNAME":{"source":"Template","field":"supplier_code","value":"2511"},"CODE":{"source":"Template","value":"×©\"×—"},"DEBIT":{"source":"Template","value":"D"},"IVDATE":{"source":"OCR","field":"InvoiceDate","value":"28/09/25","ocr_value":"2025-09-28"},"BOOKNUM":{"source":"OCR","field":"InvoiceId","value":"258001431","ocr_value":"258001431"},"DETAILS":{"source":"OCR"},"DOCNO":{"source":"Documents Search","count":3}}},"warnings":["â„¹ï¸ OCR ×–×™×”×” 6 ×¤×¨×™×˜×™× ××‘×œ ×œ× × ×•×¦×¨×•"]},"learning_analysis":{"learning_required":false,"new_patterns":{"new_partnames":[],"new_vehicles":[],"unknown_accounts":[]},"learning_instructions":[],"recommendation":"××™×Ÿ ×¦×•×¨×š ×‘×œ××™×“×”"},"execution_report":{"stage":"×©×œ×‘ 7: × ×™×§×•×™ ×•×”×›× ×” ×œ×¤×¨×™×•×¨×™×˜×™","found":["×¡×•×’: ×™×‘×•×=false, ×ª×¢×•×“×•×ª=true, ×—×™×•×‘/×–×™×›×•×™=D","×ª×‘× ×™×ª: × ××¦××” ×”×ª×××” (index=0)","×“×¤×•×¡×™×: × ××¦××•","×—×•×§×™ ×¨×›×‘×™×: ×¤×¢×™×œ×™× (173 ×¨×›×‘×™×)","booknum: \"258001431\"","ivdate: \"28/09/25\"","details: \"×¢×œ ×™×“×™ ×’×•×¨× ×××©×¨\"","documents: 3 ×¤×¨×™×˜×™×","items: 6 ×¤×¨×™×˜×™×"],"not_found":[],"warnings":[],"errors":[]},"metadata":{"ocr_invoice_id":"258001431","ocr_invoice_date":"2025-09-28","ocr_total_amount":15399.24,"ocr_subtotal":13050.2,"ocr_tax":2349.04,"processing_timestamp":"2025-11-06T13:36:50.216Z","version":"1.0-production","template_index":0,"template_type":"docs_only","has_vehicles":false,"vehicle_numbers":[],"vehicle_count":0,"has_documents":true,"document_count":3,"has_import":false}}}'