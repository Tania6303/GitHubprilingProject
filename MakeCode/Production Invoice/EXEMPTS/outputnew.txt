[
    {
        "logs": {
            "stdout": [
                "v2.0.0: input type = object isArray = false\n",
                "ğŸ” inputData keys: learned_config, docs_list, import_files, vehicles, AZURE_RESULT, AZURE_TEXT_CLEAN, template_index\n",
                "ğŸ” inputData.input exists? false\n",
                "ğŸ” inputData.AZURE exists? false\n",
                "ğŸ” inputData.SUPNAME exists? false\n",
                "âœ… docs_list parsed: 0 ×ª×¢×•×“×•×ª\n",
                "âœ… vehicles parsed: 0 ×¨×›×‘×™×\n",
                "ğŸ”§ ×‘×•× ×” structure ××ª×•×š processing_scenario.all_templates\n",
                "âœ… × ×‘× ×• 1 structures: [{\"has_import\":false,\"has_doc\":false,\"has_vehicles\":false,\"debit_type\":\"D\",\"has_budcode\":true,\"inventory_management\":\"not_managed_inventory\"}]\n",
                "ğŸš— vehicleRules: false mapping: 0\n",
                "ğŸ“‹ v2.0: ×™×© instructions: true, ×™×© sample: true\n",
                "BOOKNUM: \"051696\" â†’ \"051696\"\n",
                "âœ… DETAILS fallback ××©×•×¨×” 2: \"××¡××š ×—×ª×•×\"\n",
                "âš ï¸ SDINUMIT: × ××¦× \"×ª×¢×•×“×ª ×¨×™×©×•×\" - ×œ× ××¡×¤×¨ ×”×§×¦××”\n",
                "âœ… DETAILS ×-searchResults: ××¡××š ×—×ª×•×\n",
                "ğŸ”§ needItems=true (has_doc=false, found docs=0)\n",
                "âœ… ACCNAME ×-sample: 49902\n",
                "ğŸ“ PDES ×-sample: \"×ª×œ×•×©×™ ×©×›×¨\"\n",
                "ğŸ“Š PRICE ×-SubTotal (×¤×¨×™×˜ ×™×—×™×“): 27500\n",
                "âœ… ×¡×›×•× ×ª×•××: OCR=27500, ×—×™×©×•×‘=27500.00\n",
                "× ×•×¦×¨×• 1 ×¤×¨×™×˜×™× ×-OCR\n",
                "âœ… DETAILS kept from searchResults: ××¡××š ×—×ª×•×\n",
                "âœ… PINVOICESCONT: FNCPATNAME=×—×¡×\n",
                "{\n  \"status\": \"success\",\n  \"supplier_identification\": {\n    \"supplier_code\": \"3710\",\n    \"supplier_name\": \"×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`\",\n    \"identification_method\": \"vendor_tax_id\",\n    \"confidence\": \"high\"\n  },\n  \"invoice_data\": {\n    \"PINVOICES\": [\n      {\n        \"SUPNAME\": \"3710\",\n        \"CODE\": \"×©\\\"×—\",\n        \"DEBIT\": \"D\",\n        \"IVDATE\": \"13/05/25\",\n        \"BOOKNUM\": \"051696\",\n        \"DETAILS\": \"××¡××š ×—×ª×•×\",\n        \"PINVOICEITEMS_SUBFORM\": [\n          {\n            \"PARTNAME\": \"zzz02\",\n            \"TUNITNAME\": \"×™×—'\",\n            \"VATFLAG\": \"Y\",\n            \"ACCNAME\": \"49902\",\n            \"SPECIALVATFLAG\": \"Y\",\n            \"PDES\": \"×¨×‘×¢×•×Ÿ 1-2025 ×•×©×•×˜×£ 4/25\",\n            \"TQUANT\": 1,\n            \"PRICE\": 27500\n          }\n        ],\n        \"PINVOICESCONT_SUBFORM\": [\n          {\n            \"FNCPATNAME\": \"×—×¡×\"\n          }\n        ]\n      }\n    ]\n  },\n  \"validation\": {\n    \"all_valid\": true,\n    \"checks\": {\n      \"required_fields_check\": \"passed\",\n      \"invoice_structure_check\": \"passed\",\n      \"amount_validation\": \"passed\",\n      \"field_mapping\": {\n        \"SUPNAME\": {\n          \"source\": \"Template\",\n          \"field\": \"supplier_code\",\n          \"value\": \"3710\"\n        },\n        \"CODE\": {\n          \"source\": \"Template\",\n          \"value\": \"×©\\\"×—\"\n        },\n        \"DEBIT\": {\n          \"source\": \"Template\",\n          \"value\": \"D\"\n        },\n        \"IVDATE\": {\n          \"source\": \"OCR\",\n          \"field\": \"InvoiceDate\",\n          \"value\": \"13/05/25\",\n          \"ocr_value\": \"2025-05-13\"\n        },\n        \"BOOKNUM\": {\n          \"source\": \"OCR\",\n          \"field\": \"InvoiceId\",\n          \"value\": \"051696\",\n          \"ocr_value\": \"051696\"\n        },\n        \"DETAILS\": {\n          \"source\": \"First Item PDES\",\n          \"value\": \"××¡××š ×—×ª×•×\"\n        },\n        \"PINVOICEITEMS_SUBFORM\": {\n          \"source\": \"OCR Items\",\n          \"count\": 1\n        }\n      }\n    },\n    \"warnings\": [\n      \"âœ… ×¡×›×•× ×ª×§×™×Ÿ: 27500.00 ×©\\\"×— (0.0% ×”×¤×¨×©)\"\n    ]\n  },\n  \"learning_analysis\": {\n    \"learning_required\": false,\n    \"new_patterns\": {\n      \"new_partnames\": [],\n      \"new_vehicles\": [],\n      \"unknown_accounts\": []\n    },\n    \"learning_instructions\": [],\n    \"recommendation\": \"××™×Ÿ ×¦×•×¨×š ×‘×œ××™×“×”\"\n  },\n  \"execution_report\": {\n    \"stage\": \"×©×œ×‘ 7: × ×™×§×•×™ ×•×”×›× ×” ×œ×¤×¨×™×•×¨×™×˜×™\",\n    \"found\": [\n      \"×¡×•×’: ×™×‘×•×=false, ×ª×¢×•×“×•×ª=false, ×—×™×•×‘/×–×™×›×•×™=D\",\n      \"×ª×‘× ×™×ª: index=0 (××§×œ×˜ - template_index)\",\n      \"×“×¤×•×¡×™×: × ××¦××•\",\n      \"booknum: \\\"051696\\\"\",\n      \"ivdate: \\\"13/05/25\\\"\",\n      \"details: \\\"××¡××š ×—×ª×•×\\\"\",\n      \"items: 1 ×¤×¨×™×˜×™×\",\n      \"subtotal: 27500\",\n      \"total_tax: 4950\",\n      \"invoice_total: 32450\"\n    ],\n    \"not_found\": [],\n    \"warnings\": [],\n    \"errors\": [],\n    \"template_match\": {\n      \"status\": \"forced\",\n      \"template_index\": 0,\n      \"reason\": \"template_index ×¡×•×¤×§ ×‘×§×œ×˜\",\n      \"document_characteristics\": {\n        \"has_import\": false,\n        \"has_doc\": false,\n        \"debit_type\": \"D\"\n      },\n      \"available_templates\": 1\n    }\n  },\n  \"metadata\": {\n    \"ocr_invoice_id\": \"051696\",\n    \"ocr_invoice_date\": \"2025-05-13\",\n    \"ocr_total_amount\": 32450,\n    \"ocr_subtotal\": 27500,\n    \"ocr_tax\": 4950,\n    \"processing_timestamp\": \"2025-12-17T11:05:55.984Z\",\n    \"version\": \"1.0-production\",\n    \"template_index\": 0,\n    \"template_type\": \"regular\",\n    \"has_vehicles\": false,\n    \"vehicle_numbers\": [],\n    \"vehicle_count\": 0,\n    \"has_documents\": false,\n    \"document_count\": 0,\n    \"has_import\": false\n  }\n}\n",
                "v2.0.0: items = 1\n",
                "v2.0.0: BOOKNUM = 051696\n",
                "v2.0.0: DOCNO = undefined\n",
                "==========================================\n"
            ],
            "stderr": []
        },
        "executionTimeMs": 1372,
        "result": {
            "status": "success",
            "supplier_identification": {
                "supplier_code": "3710",
                "supplier_name": "×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`",
                "identification_method": "vendor_tax_id",
                "confidence": "high"
            },
            "invoice_data": {
                "PINVOICES": [
                    {
                        "SUPNAME": "3710",
                        "CODE": "×©\"×—",
                        "DEBIT": "D",
                        "IVDATE": "13/05/25",
                        "BOOKNUM": "051696",
                        "DETAILS": "××¡××š ×—×ª×•×",
                        "PINVOICEITEMS_SUBFORM": [
                            {
                                "PARTNAME": "zzz02",
                                "TUNITNAME": "×™×—'",
                                "VATFLAG": "Y",
                                "ACCNAME": "49902",
                                "SPECIALVATFLAG": "Y",
                                "PDES": "×¨×‘×¢×•×Ÿ 1-2025 ×•×©×•×˜×£ 4/25",
                                "TQUANT": 1,
                                "PRICE": 27500
                            }
                        ],
                        "PINVOICESCONT_SUBFORM": [
                            {
                                "FNCPATNAME": "×—×¡×"
                            }
                        ]
                    }
                ]
            },
            "validation": {
                "all_valid": true,
                "checks": {
                    "required_fields_check": "passed",
                    "invoice_structure_check": "passed",
                    "amount_validation": "passed",
                    "field_mapping": {
                        "SUPNAME": {
                            "source": "Template",
                            "field": "supplier_code",
                            "value": "3710"
                        },
                        "CODE": {
                            "source": "Template",
                            "value": "×©\"×—"
                        },
                        "DEBIT": {
                            "source": "Template",
                            "value": "D"
                        },
                        "IVDATE": {
                            "source": "OCR",
                            "field": "InvoiceDate",
                            "value": "13/05/25",
                            "ocr_value": "2025-05-13"
                        },
                        "BOOKNUM": {
                            "source": "OCR",
                            "field": "InvoiceId",
                            "value": "051696",
                            "ocr_value": "051696"
                        },
                        "DETAILS": {
                            "source": "First Item PDES",
                            "value": "××¡××š ×—×ª×•×"
                        },
                        "PINVOICEITEMS_SUBFORM": {
                            "source": "OCR Items",
                            "count": 1
                        }
                    }
                },
                "warnings": [
                    "âœ… ×¡×›×•× ×ª×§×™×Ÿ: 27500.00 ×©\"×— (0.0% ×”×¤×¨×©)"
                ]
            },
            "learning_analysis": {
                "learning_required": false,
                "new_patterns": {
                    "new_partnames": [],
                    "new_vehicles": [],
                    "unknown_accounts": []
                },
                "learning_instructions": [],
                "recommendation": "××™×Ÿ ×¦×•×¨×š ×‘×œ××™×“×”"
            },
            "execution_report": {
                "stage": "×©×œ×‘ 7: × ×™×§×•×™ ×•×”×›× ×” ×œ×¤×¨×™×•×¨×™×˜×™",
                "found": [
                    "×¡×•×’: ×™×‘×•×=false, ×ª×¢×•×“×•×ª=false, ×—×™×•×‘/×–×™×›×•×™=D",
                    "×ª×‘× ×™×ª: index=0 (××§×œ×˜ - template_index)",
                    "×“×¤×•×¡×™×: × ××¦××•",
                    "booknum: \"051696\"",
                    "ivdate: \"13/05/25\"",
                    "details: \"××¡××š ×—×ª×•×\"",
                    "items: 1 ×¤×¨×™×˜×™×",
                    "subtotal: 27500",
                    "total_tax: 4950",
                    "invoice_total: 32450"
                ],
                "not_found": [],
                "warnings": [],
                "errors": [],
                "template_match": {
                    "status": "forced",
                    "template_index": 0,
                    "reason": "template_index ×¡×•×¤×§ ×‘×§×œ×˜",
                    "document_characteristics": {
                        "has_import": false,
                        "has_doc": false,
                        "debit_type": "D"
                    },
                    "available_templates": 1
                }
            },
            "metadata": {
                "ocr_invoice_id": "051696",
                "ocr_invoice_date": "2025-05-13",
                "ocr_total_amount": 32450,
                "ocr_subtotal": 27500,
                "ocr_tax": 4950,
                "processing_timestamp": "2025-12-17T11:05:55.984Z",
                "version": "1.0-production",
                "template_index": 0,
                "template_type": "regular",
                "has_vehicles": false,
                "vehicle_numbers": [],
                "vehicle_count": 0,
                "has_documents": false,
                "document_count": 0,
                "has_import": false
            }
        }
    }
]
