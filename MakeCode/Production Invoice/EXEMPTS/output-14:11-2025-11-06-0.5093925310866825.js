'{"logs":{"stdout":["v1.7.1: input type = object isArray = false\n","ğŸ” inputData keys: learned_config, docs_list, import_files, vehicles, AZURE_RESULT, AZURE_TEXT_CLEAN, status\n","ğŸ” inputData.input exists? false\n","ğŸ” inputData.AZURE exists? false\n","ğŸ” inputData.SUPNAME exists? false\n","âœ… docs_list parsed: 50 ×ª×¢×•×“×•×ª\n","âœ… vehicles parsed: 173 ×¨×›×‘×™×\n","âœ… Injected 173 vehicles into config\n","ğŸ”§ ×‘×•× ×” structure ××ª×•×š processing_scenario.all_templates\n","âœ… × ×‘× ×• 1 structures: [{\"has_import\":false,\"has_doc\":true,\"has_vehicles\":false,\"debit_type\":\"D\",\"has_budcode\":true,\"inventory_management\":\"not_managed_inventory\"}]\n","ğŸš— vehicleRules: true mapping: 173\n","ğŸ“‹ ×™×© 50 ×ª×¢×•×“×•×ª ×–××™× ×•×ª\n","ğŸ” ××—×¤×© ×‘-0 UnidentifiedNumbers\n","ğŸ” ××—×¤×© fallback ×‘-AZURE_TEXT\n","ğŸ“Š ×¡×”\"×› ×ª×¢×•×“×•×ª ×©× ××¦××•: 0\n","ğŸ” ××—×¤×© ×ª×¢×•×“×•×ª: × ××¦××• 0\n","BOOKNUM: \"258001431\" â†’ \"258001431\"\n","ğŸ” extractVehiclesAdvanced: vehicleRules=true, mapping=173\n","ğŸš— foundVehicles from OCR: 0\n","ğŸ“ Searching in text: 1314 chars, has 419-29-702: false\n","ğŸ” ×—×™×¤×•×© ×¨×›×‘×™× ×‘×˜×§×¡×˜ (CLEAN)\n","ğŸ”§ needItems=true (has_doc=true, found docs=0)\n","âœ… ×¡×›×•× ×ª×•××: OCR=13050.2, ×—×™×©×•×‘=13050.20\n","× ×•×¦×¨×• 6 ×¤×¨×™×˜×™× ×-OCR\n","âœ… DETAILS set from first item PDES: ×¢×¨×›×” ×œ×“×•×›××•×ª×™ ×§×•×\n","{\n  \"status\": \"success\",\n  \"supplier_identification\": {\n    \"supplier_code\": \"2511\",\n    \"supplier_name\": \"×¤×œ×¡××•×Ÿ ×‘×¢\\\"×\",\n    \"identification_method\": \"vendor_tax_id\",\n    \"confidence\": \"high\"\n  },\n  \"invoice_data\": {\n    \"PINVOICES\": [\n      {\n        \"SUPNAME\": \"2511\",\n        \"CODE\": \"×©\\\"×—\",\n        \"DEBIT\": \"D\",\n        \"IVDATE\": \"28/09/25\",\n        \"BOOKNUM\": \"258001431\",\n        \"PINVOICEITEMS_SUBFORM\": [\n          {\n            \"PARTNAME\": \"item\",\n            \"TUNITNAME\": \"×™×—×™\",\n            \"VATFLAG\": \"Y\",\n            \"ACCNAME\": \"\",\n            \"SPECIALVATFLAG\": \"Y\",\n            \"PDES\": \"×¢×¨×›×” ×œ×“×•×›××•×ª×™ ×§×•×\",\n            \"TQUANT\": 160,\n            \"PRICE\": 34.4\n          },\n          {\n            \"PARTNAME\": \"item\",\n            \"TUNITNAME\": \"×™×—×™\",\n            \"VATFLAG\": \"Y\",\n            \"ACCNAME\": \"\",\n            \"SPECIALVATFLAG\": \"Y\",\n            \"PDES\": \"×§×œ×¡. ××›×¡×” ×¤×¨×’××•×Ÿ ××•×¨×›×‘\",\n            \"TQUANT\": 52,\n            \"PRICE\": 25.21\n          },\n          {\n            \"PARTNAME\": \"item\",\n            \"TUNITNAME\": \"×™×—×™\",\n            \"VATFLAG\": \"Y\",\n            \"ACCNAME\": \"\",\n            \"SPECIALVATFLAG\": \"Y\",\n            \"PDES\": \"×§×œ×¡. ×¦× ×•×¨ ×”×“×—×” ×¤×¨×’××•×Ÿ ××¨×•×–\",\n            \"TQUANT\": 22,\n            \"PRICE\": 6.19\n          },\n          {\n            \"PARTNAME\": \"item\",\n            \"TUNITNAME\": \"×™×—×™\",\n            \"VATFLAG\": \"Y\",\n            \"ACCNAME\": \"\",\n            \"SPECIALVATFLAG\": \"Y\",\n            \"PDES\": \"×§×œ×¡. ×× ×•×¤×™× ××•×¨×›×‘×™×\",\n            \"TQUANT\": 10,\n            \"PRICE\": 9.91\n          },\n          {\n            \"PARTNAME\": \"item\",\n            \"TUNITNAME\": \"×™×—×™\",\n            \"VATFLAG\": \"Y\",\n            \"ACCNAME\": \"\",\n            \"SPECIALVATFLAG\": \"Y\",\n            \"PDES\": \"×× ×’× ×•×Ÿ ×“×•××•×Ÿ ××¨×•×–\",\n            \"TQUANT\": 160,\n            \"PRICE\": 14.48\n          },\n          {\n            \"PARTNAME\": \"item\",\n            \"TUNITNAME\": \"×™×—×™\",\n            \"VATFLAG\": \"Y\",\n            \"ACCNAME\": \"\",\n            \"SPECIALVATFLAG\": \"Y\",\n            \"PDES\": \"×›×¤×ª×•×¨ 55 ×§×•××¤×œ×˜\",\n            \"TQUANT\": 160,\n            \"PRICE\": 23.02\n          }\n        ],\n        \"DETAILS\": \"×¢×¨×›×” ×œ×“×•×›××•×ª×™ ×§×•×\",\n        \"PINVOICESCONT_SUBFORM\": []\n      }\n    ]\n  },\n  \"validation\": {\n    \"all_valid\": true,\n    \"checks\": {\n      \"required_fields_check\": \"passed\",\n      \"invoice_structure_check\": \"passed\",\n      \"amount_validation\": \"passed\",\n      \"field_mapping\": {\n        \"SUPNAME\": {\n          \"source\": \"Template\",\n          \"field\": \"supplier_code\",\n          \"value\": \"2511\"\n        },\n        \"CODE\": {\n          \"source\": \"Template\",\n          \"value\": \"×©\\\"×—\"\n        },\n        \"DEBIT\": {\n          \"source\": \"Template\",\n          \"value\": \"D\"\n        },\n        \"IVDATE\": {\n          \"source\": \"OCR\",\n          \"field\": \"InvoiceDate\",\n          \"value\": \"28/09/25\",\n          \"ocr_value\": \"2025-09-28\"\n        },\n        \"BOOKNUM\": {\n          \"source\": \"OCR\",\n          \"field\": \"InvoiceId\",\n          \"value\": \"258001431\",\n          \"ocr_value\": \"258001431\"\n        },\n        \"DETAILS\": {\n          \"source\": \"First Item PDES\",\n          \"value\": \"×¢×¨×›×” ×œ×“×•×›××•×ª×™ ×§×•×\"\n        },\n        \"PINVOICEITEMS_SUBFORM\": {\n          \"source\": \"OCR Items\",\n          \"count\": 6\n        }\n      }\n    },\n    \"warnings\": [\n      \"âœ… ×¡×›×•× ×ª×§×™×Ÿ: 13050.20 ×©\\\"×— (0.0% ×”×¤×¨×©)\"\n    ]\n  },\n  \"learning_analysis\": {\n    \"learning_required\": false,\n    \"new_patterns\": {\n      \"new_partnames\": [],\n      \"new_vehicles\": [],\n      \"unknown_accounts\": []\n    },\n    \"learning_instructions\": [],\n    \"recommendation\": \"××™×Ÿ ×¦×•×¨×š ×‘×œ××™×“×”\"\n  },\n  \"execution_report\": {\n    \"stage\": \"×©×œ×‘ 7: × ×™×§×•×™ ×•×”×›× ×” ×œ×¤×¨×™×•×¨×™×˜×™\",\n    \"found\": [\n      \"×¡×•×’: ×™×‘×•×=false, ×ª×¢×•×“×•×ª=true, ×—×™×•×‘/×–×™×›×•×™=D\",\n      \"×ª×‘× ×™×ª: × ××¦××” ×”×ª×××” (index=0)\",\n      \"×“×¤×•×¡×™×: × ××¦××•\",\n      \"×—×•×§×™ ×¨×›×‘×™×: ×¤×¢×™×œ×™× (173 ×¨×›×‘×™×)\",\n      \"booknum: \\\"258001431\\\"\",\n      \"ivdate: \\\"28/09/25\\\"\",\n      \"details: \\\"×¢×œ ×™×“×™ ×’×•×¨× ×××©×¨\\\"\",\n      \"documents: 0 ×¤×¨×™×˜×™×\",\n      \"items: 6 ×¤×¨×™×˜×™×\"\n    ],\n    \"not_found\": [],\n    \"warnings\": [],\n    \"errors\": []\n  },\n  \"metadata\": {\n    \"ocr_invoice_id\": \"258001431\",\n    \"ocr_invoice_date\": \"2025-09-28\",\n    \"ocr_total_amount\": 15399.24,\n    \"ocr_subtotal\": 13050.2,\n    \"ocr_tax\": 2349.04,\n    \"processing_timestamp\": \"2025-11-06T12:33:45.334Z\",\n    \"version\": \"1.0-production\",\n    \"template_index\": 0,\n    \"template_type\": \"docs_only\",\n    \"has_vehicles\": false,\n    \"vehicle_numbers\": [],\n    \"vehicle_count\": 0,\n    \"has_documents\": true,\n    \"document_count\": 0,\n    \"has_import\": false\n  }\n}\n","v1.7.1: items = 6\n","v1.7.1: BOOKNUM = 258001431\n","v1.7.1: DOCNO = undefined\n","==========================================\n"],"stderr":[]},"executionTimeMs":1327,"result":{"status":"success","supplier_identification":{"supplier_code":"2511","supplier_name":"×¤×œ×¡××•×Ÿ ×‘×¢\"×","identification_method":"vendor_tax_id","confidence":"high"},"invoice_data":{"PINVOICES":[{"SUPNAME":"2511","CODE":"×©\"×—","DEBIT":"D","IVDATE":"28/09/25","BOOKNUM":"258001431","PINVOICEITEMS_SUBFORM":[{"PARTNAME":"item","TUNITNAME":"×™×—×™","VATFLAG":"Y","ACCNAME":"","SPECIALVATFLAG":"Y","PDES":"×¢×¨×›×” ×œ×“×•×›××•×ª×™ ×§×•×","TQUANT":160,"PRICE":34.4},{"PARTNAME":"item","TUNITNAME":"×™×—×™","VATFLAG":"Y","ACCNAME":"","SPECIALVATFLAG":"Y","PDES":"×§×œ×¡. ××›×¡×” ×¤×¨×’××•×Ÿ ××•×¨×›×‘","TQUANT":52,"PRICE":25.21},{"PARTNAME":"item","TUNITNAME":"×™×—×™","VATFLAG":"Y","ACCNAME":"","SPECIALVATFLAG":"Y","PDES":"×§×œ×¡. ×¦× ×•×¨ ×”×“×—×” ×¤×¨×’××•×Ÿ ××¨×•×–","TQUANT":22,"PRICE":6.19},{"PARTNAME":"item","TUNITNAME":"×™×—×™","VATFLAG":"Y","ACCNAME":"","SPECIALVATFLAG":"Y","PDES":"×§×œ×¡. ×× ×•×¤×™× ××•×¨×›×‘×™×","TQUANT":10,"PRICE":9.91},{"PARTNAME":"item","TUNITNAME":"×™×—×™","VATFLAG":"Y","ACCNAME":"","SPECIALVATFLAG":"Y","PDES":"×× ×’× ×•×Ÿ ×“×•××•×Ÿ ××¨×•×–","TQUANT":160,"PRICE":14.48},{"PARTNAME":"item","TUNITNAME":"×™×—×™","VATFLAG":"Y","ACCNAME":"","SPECIALVATFLAG":"Y","PDES":"×›×¤×ª×•×¨ 55 ×§×•××¤×œ×˜","TQUANT":160,"PRICE":23.02}],"DETAILS":"×¢×¨×›×” ×œ×“×•×›××•×ª×™ ×§×•×","PINVOICESCONT_SUBFORM":[]}]},"validation":{"all_valid":true,"checks":{"required_fields_check":"passed","invoice_structure_check":"passed","amount_validation":"passed","field_mapping":{"SUPNAME":{"source":"Template","field":"supplier_code","value":"2511"},"CODE":{"source":"Template","value":"×©\"×—"},"DEBIT":{"source":"Template","value":"D"},"IVDATE":{"source":"OCR","field":"InvoiceDate","value":"28/09/25","ocr_value":"2025-09-28"},"BOOKNUM":{"source":"OCR","field":"InvoiceId","value":"258001431","ocr_value":"258001431"},"DETAILS":{"source":"First Item PDES","value":"×¢×¨×›×” ×œ×“×•×›××•×ª×™ ×§×•×"},"PINVOICEITEMS_SUBFORM":{"source":"OCR Items","count":6}}},"warnings":["âœ… ×¡×›×•× ×ª×§×™×Ÿ: 13050.20 ×©\"×— (0.0% ×”×¤×¨×©)"]},"learning_analysis":{"learning_required":false,"new_patterns":{"new_partnames":[],"new_vehicles":[],"unknown_accounts":[]},"learning_instructions":[],"recommendation":"××™×Ÿ ×¦×•×¨×š ×‘×œ××™×“×”"},"execution_report":{"stage":"×©×œ×‘ 7: × ×™×§×•×™ ×•×”×›× ×” ×œ×¤×¨×™×•×¨×™×˜×™","found":["×¡×•×’: ×™×‘×•×=false, ×ª×¢×•×“×•×ª=true, ×—×™×•×‘/×–×™×›×•×™=D","×ª×‘× ×™×ª: × ××¦××” ×”×ª×××” (index=0)","×“×¤×•×¡×™×: × ××¦××•","×—×•×§×™ ×¨×›×‘×™×: ×¤×¢×™×œ×™× (173 ×¨×›×‘×™×)","booknum: \"258001431\"","ivdate: \"28/09/25\"","details: \"×¢×œ ×™×“×™ ×’×•×¨× ×××©×¨\"","documents: 0 ×¤×¨×™×˜×™×","items: 6 ×¤×¨×™×˜×™×"],"not_found":[],"warnings":[],"errors":[]},"metadata":{"ocr_invoice_id":"258001431","ocr_invoice_date":"2025-09-28","ocr_total_amount":15399.24,"ocr_subtotal":13050.2,"ocr_tax":2349.04,"processing_timestamp":"2025-11-06T12:33:45.334Z","version":"1.0-production","template_index":0,"template_type":"docs_only","has_vehicles":false,"vehicle_numbers":[],"vehicle_count":0,"has_documents":true,"document_count":0,"has_import":false}}}'