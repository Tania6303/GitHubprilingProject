// ×‘×“×™×§×ª × ×™×§×•×™ ×¢× ×—×©×‘×•× ×™×ª ×××™×ª×™×ª ×-×˜×›×•××˜×¨-××›×•×Ÿ ×¡×¤×™×“×•××˜×¨×™×
// ××¡×¤×¨ ×—×©×‘×•× ×™×ª: 286015 NS
// ×ª××¨×™×š: 08/07/25
// ×¨×›×‘: 419-29-702
// ×¡×”"×›: 1,357.00 ×©"×—

const { standardizeText, cleanForVehicles, deepClean } = require('../standardize-text.js');

// ×”×˜×§×¡×˜ ×”××§×•×¨×™ ×©×”××©×ª××© ×”×¢×‘×™×¨
const realInvoiceText = `×—×©×‘×•× ×™×ª ××¡'/×§×‘×œ×”
×˜×›×•××˜×¨-××›×•×Ÿ ×¡×¤×™×“×•××˜×¨×™× ×‘×¢"×
×ª.×“  123  ×’×‘×¢×ª×™×™×  5310102
×˜×œ×¤×•×Ÿ: 03-7322332 ×¤×§×¡ 03-7322334
×—.×¤. 511463284 ×¢×•×¡×§ ××•×¨×©×”

×ª××¨×™×š: 08/07/25 ×§×•×“ ×œ×§×•×—: 1801 ××¡×¤×¨ ×—×©×‘×•× ×™×ª: 286015   NS
××¡×¤×¨ ×¨×›×‘: 419-29-702

×¤×™×¨×•×˜:
1. ×”×ª×§× ×ª ××¦×œ××” ×›×•×œ×œ ×¦×™×•×“ × ×œ×•×•×”          300.00 ×©"×—
2. ×›×™×•×œ ×¡×¤×™×“×•××˜×¨                         450.00 ×©"×—
3. ×˜×™×¤×•×œ ×©× ×ª×™ ×›×•×œ×œ ×‘×“×™×§×•×ª               250.00 ×©"×—
4. ×¢×‘×•×“×•×ª ×—×©××œ × ×•×¡×¤×•×ª                   157.00 ×©"×—

×¡×”"×› ×œ×¤× ×™ ××¢"×: 1,157.00 ×©"×—
××¢"× (17%):       200.00 ×©"×—
×¡×”"×› ×œ×ª×©×œ×•×:   1,357.00 ×©"×—`;

console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
console.log("ğŸ§ª ×‘×“×™×§×ª Text Standardization ×¢× ×—×©×‘×•× ×™×ª ×××™×ª×™×ª");
console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");

// ==========================================
// ×‘×“×™×§×” 1: × ×™×§×•×™ ×‘×¡×™×¡×™
// ==========================================
console.log("ğŸ“‹ ×‘×“×™×§×” 1: standardizeText() - × ×™×§×•×™ ××œ×");
console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
const cleanedFull = standardizeText(realInvoiceText);
console.log(cleanedFull);
console.log("\nâœ… ××•×¨×š ××§×•×¨×™:", realInvoiceText.length, "×ª×•×•×™×");
console.log("âœ… ××•×¨×š × ×§×™:", cleanedFull.length, "×ª×•×•×™×");
console.log("");

// ==========================================
// ×‘×“×™×§×” 2: ×—×™×œ×•×¥ ××¡×¤×¨×™ ×¨×›×‘
// ==========================================
console.log("ğŸš— ×‘×“×™×§×” 2: cleanForVehicles() - ××™×˜×•×‘ ×œ×—×™×œ×•×¥ ×¨×›×‘×™×");
console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
const cleanedVehicles = cleanForVehicles(realInvoiceText);
const vehiclePattern = /\d{3}-\d{2}-\d{3}/g;
const foundVehicles = cleanedVehicles.match(vehiclePattern);
console.log("×¨×›×‘×™× ×©× ××¦××•:", foundVehicles);
console.log("");

// ==========================================
// ×‘×“×™×§×” 3: ×”×©×•×•××ª ×œ×¤× ×™/××—×¨×™
// ==========================================
console.log("ğŸ” ×‘×“×™×§×” 3: ×”×©×•×•××ª ×œ×¤× ×™/××—×¨×™ ×¢×‘×•×¨ ×©×•×¨×•×ª ×¡×¤×¦×™×¤×™×•×ª");
console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

const dirtyLines = [
    "×ª××¨×™×š: 08/07/25 ×§×•×“ ×œ×§×•×—: 1801 ××¡×¤×¨ ×—×©×‘×•× ×™×ª: 286015   NS",
    "××¡×¤×¨ ×¨×›×‘: 419-29-702",
    "×¡×”\"×› ×œ×ª×©×œ×•×:   1,357.00 ×©\"×—"
];

dirtyLines.forEach(line => {
    const cleaned = standardizeText(line);
    console.log("×œ×¤× ×™: ", line);
    console.log("××—×¨×™:", cleaned);
    console.log("");
});

// ==========================================
// ×‘×“×™×§×” 4: ×—×™×œ×•×¥ ××¡×¤×¨×™×
// ==========================================
console.log("ğŸ’° ×‘×“×™×§×” 4: ×—×™×œ×•×¥ ×¡×›×•××™× ××”×—×©×‘×•× ×™×ª");
console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
const amountPattern = /(\d{1,3}(?:,\d{3})*(?:\.\d{2})?)\s*×©"×—/g;
const amounts = [];
let match;
while ((match = amountPattern.exec(cleanedFull)) !== null) {
    amounts.push(match[1]);
}
console.log("×¡×›×•××™× ×©× ××¦××•:", amounts);
console.log("");

// ==========================================
// ×‘×“×™×§×” 5: ×–×™×”×•×™ ××¡×¤×¨ ×—×©×‘×•× ×™×ª
// ==========================================
console.log("ğŸ“„ ×‘×“×™×§×” 5: ×–×™×”×•×™ ××¡×¤×¨ ×—×©×‘×•× ×™×ª");
console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
const invoiceNumPattern = /××¡×¤×¨ ×—×©×‘×•× ×™×ª:\s*(\d+)/;
const invoiceMatch = cleanedFull.match(invoiceNumPattern);
if (invoiceMatch) {
    console.log("××¡×¤×¨ ×—×©×‘×•× ×™×ª:", invoiceMatch[1]);
    console.log("âœ… × ×™×§×•×™: ×”×¡×¨×ª 'NS' ××”×¡×•×£ - ×‘×•×¦×¢!");
}
console.log("");

// ==========================================
// ×‘×“×™×§×” 6: ×‘×“×™×§×ª ×ª×•×•×™× ×‘×œ×ª×™ × ×¨××™×
// ==========================================
console.log("ğŸ‘ï¸  ×‘×“×™×§×” 6: ×‘×“×™×§×ª ×ª×•×•×™× ×‘×œ×ª×™ × ×¨××™×");
console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

// ×”×•×¡×£ ×ª×•×•×™× ×‘×œ×ª×™ × ×¨××™× ×œ×˜×§×¡×˜
const dirtyWithInvisible = "××¡×¤×¨ ×¨×›×‘:\u00A0419\u200B-\u00A029\u200B-\u00A0702";
const cleanedInvisible = standardizeText(dirtyWithInvisible);

console.log("×œ×¤× ×™ (×¢× ×ª×•×•×™× ×‘×œ×ª×™ × ×¨××™×):");
console.log("  ", JSON.stringify(dirtyWithInvisible));
console.log("  ××•×¨×š:", dirtyWithInvisible.length);

console.log("\n××—×¨×™:");
console.log("  ", JSON.stringify(cleanedInvisible));
console.log("  ××•×¨×š:", cleanedInvisible.length);
console.log("  ×”×•×¡×¨×•:", dirtyWithInvisible.length - cleanedInvisible.length, "×ª×•×•×™×");
console.log("");

// ==========================================
// ×‘×“×™×§×” 7: × ×™×§×•×™ ×¢××•×§
// ==========================================
console.log("ğŸ”§ ×‘×“×™×§×” 7: deepClean() - × ×™×§×•×™ ×¢××•×§ ××§×¡×™××œ×™");
console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
const deepCleaned = deepClean(realInvoiceText);
console.log("âœ… × ×™×§×•×™ ×¢××•×§ ×”×•×©×œ×");
console.log("âœ… ×”×¤×¨×© ×‘××•×¨×š:", realInvoiceText.length - deepCleaned.length, "×ª×•×•×™×");
console.log("");

// ==========================================
// ×¡×™×›×•×
// ==========================================
console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
console.log("ğŸ“Š ×¡×™×›×•× ×‘×“×™×§×•×ª");
console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
console.log("âœ… × ×™×§×•×™ ×˜×§×¡×˜ ××œ× - ×‘×•×¦×¢");
console.log("âœ… ×–×™×”×•×™ ×¨×›×‘:", foundVehicles ? foundVehicles[0] : "×œ× × ××¦×");
console.log("âœ… ××¡×¤×¨ ×—×©×‘×•× ×™×ª:", invoiceMatch ? invoiceMatch[1] : "×œ× × ××¦×");
console.log("âœ… ×¡×›×•××™× × ××¦××•:", amounts.length);
console.log("âœ… ×”×¡×¨×ª ×ª×•×•×™× ×‘×œ×ª×™ × ×¨××™× - ×‘×•×¦×¢");
console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
