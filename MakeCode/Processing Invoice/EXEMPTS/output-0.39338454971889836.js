'{"logs":{"stdout":["ğŸ”„ normalizeInput v5.1 18:00 - rawInput type: object, isArray: false\n","ğŸ”„ rawInput keys: learned_config\n","  ğŸ“¦ Found learned_config wrapper, extracting...\n","  âœ… learned_config has status and templates\n","\nğŸ”„ ××¢×‘×“ ×ª×‘× ×™×ª 0...\n","\nğŸ“‹ processTemplate - template_index: 0\n","   scan_status: scanned\n","   has AZURE_RESULT: true\n","   has docs: true\n","   ocrFields keys: AmountDue_amount, AmountDue_currency, CustomerAddress, CustomerAddress_houseNumber, CustomerAddress_road\n","{\"status\":\"success\",\"llm_prompt\":{\"supplier_code\":\"3710\",\"supplier_name\":\"×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`\",\"all_templates\":[{\"template_index\":0,\"document_type\":\"×—×©×‘×•× ×™×ª ×¨×’×™×œ×” ×¢× ×¤×™×¨×•×˜\",\"document_type_info\":{\"type\":\"×—×©×‘×•× ×™×ª ×¨×’×™×œ×” ×¢× ×¤×™×¨×•×˜\",\"type_key\":\"regular_invoice\",\"structure_flags\":{\"has_import\":false,\"has_doc\":false,\"has_purchase_orders\":false,\"has_date_range\":false,\"has_budcode\":false,\"has_pdaccname\":false,\"inventory_management\":\"not_managed_inventory\",\"debit_type\":\"D\"}},\"instructions\":{\"overview\":\"×—×©×‘×•× ×™×ª ××¡×¤×§ ×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`\",\"processing_steps\":[\"1. ×–×”×” ××ª ××¡×¤×¨ ×”×—×©×‘×•× ×™×ª (BOOKNUM) ××ª×•×š InvoiceId\",\"2. ×—×œ×¥ ×ª××¨×™×š ×—×©×‘×•× ×™×ª (IVDATE) ××ª×•×š InvoiceDate - ×”××¨ ×œ×¤×•×¨××˜ DD/MM/YY\",\"3. ×—×œ×¥ ×ª×™××•×¨ ×›×œ×œ×™ (DETAILS) - ×ª×™××•×¨ ×”×©×™×¨×•×ª ×”×¢×™×§×¨×™ (×œ× ×˜×œ×¤×•×Ÿ/×›×ª×•×‘×ª!)\",\"4. ×œ×›×œ ×¤×¨×™×˜: ×—×œ×¥ PDES (×ª×™××•×¨), TQUANT (×›××•×ª), PRICE (××—×™×¨ ×œ×¤× ×™ ××¢\\\"×)\",\"5. ×œ×›×œ ×¤×¨×™×˜: ×‘×—×¨ ACCNAME ××ª×•×š ×”×—×©×‘×•× ×•×ª ×”×–××™× ×™× ×œ×¤×™ ×¡×•×’ ×”×”×•×¦××”\",\"6. ×‘×“×•×§ ×× ×™×© ××¡×¤×¨ ×”×§×¦××” (×¨×§ ×× ××•×¤×™×¢×” ×”××™×œ×” '×”×§×¦××”'!) - ×× ×›×Ÿ, ×¨×©×•× ×‘-SDINUMIT\",\"7. ×—×©×‘ ××—×™×¨: SubTotal_amount ××• (InvoiceTotal - TotalTax)\"],\"fields\":{\"booknum\":{\"field_name\":\"BOOKNUM\",\"description\":\"××¡×¤×¨ ×—×©×‘×•× ×™×ª ×¡×¤×§\",\"how_to_find\":\"×—×¤×© ×‘×©×“×” InvoiceId ×‘-OCR\",\"example\":\"052785\"},\"ivdate\":{\"field_name\":\"IVDATE\",\"description\":\"×ª××¨×™×š ×—×©×‘×•× ×™×ª\",\"how_to_find\":\"×§×— ××ª InvoiceDate ×•×”××¨ ×œ-DD/MM/YY\",\"example\":\"11/09/25\"},\"details\":{\"field_name\":\"DETAILS\",\"description\":\"×ª×™××•×¨ ×›×œ×œ×™ ×©×œ ×”×—×©×‘×•× ×™×ª ×‘×›×•×ª×¨×ª\",\"importance\":\"×’×‘×•×”×” - ××¡×›× ××ª ××”×•×ª ×”×—×©×‘×•× ×™×ª\",\"how_to_find\":\"×—×¤×© ×ª×™××•×¨ ×”×©×™×¨×•×ª ×”×¢×™×§×¨×™ ×‘×˜×§×¡×˜\",\"do_NOT_use\":[\"×˜×œ×¤×•×Ÿ\",\"×¤×§×¡\",\"×›×ª×•×‘×ª\",\"××¡×¤×¨ ×¢×•×¡×§ ××•×¨×©×”\"],\"example\":\"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2\"},\"price\":{\"field_name\":\"PRICE\",\"location\":\"PINVOICEITEMS_SUBFORM\",\"description\":\"××—×™×¨ ×œ×¤× ×™ ××¢\\\"×\",\"how_to_calculate\":\"SubTotal_amount ××• (InvoiceTotal_amount - TotalTax_amount)\",\"example\":7500},\"pdes\":{\"field_name\":\"PDES\",\"location\":\"PINVOICEITEMS_SUBFORM\",\"description\":\"×ª×™××•×¨ ×”×¤×¨×™×˜/×©×™×¨×•×ª ×‘×©×•×¨×ª ×”×¤×™×¨×•×˜\",\"importance\":\"×§×¨×™×˜×™! ×–×” ××–×”×” ××ª ×¡×•×’ ×”×”×•×¦××”\",\"max_length\":48,\"how_to_find\":\"×—×¤×© ×‘×˜×§×¡×˜ ×©×•×¨×•×ª ×”××ª××¨×•×ª ×©×™×¨×•×ª×™×\",\"example\":\"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2\"},\"accname\":{\"field_name\":\"ACCNAME\",\"location\":\"PINVOICEITEMS_SUBFORM\",\"description\":\"×—×©×‘×•×Ÿ ×”× ×”×œ×ª ×—×©×‘×•× ×•×ª ×œ×¡×™×•×•×’ ×”×”×•×¦××”\",\"importance\":\"×§×¨×™×˜×™! ×§×•×‘×¢ ××™×š ×”×”×•×¦××” ××¡×•×•×’×ª\",\"available_accounts\":[\"49998\",\"49902\"],\"examples_from_history\":[{\"partname\":\"zzz02\",\"description\":\"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2\",\"accname\":\"49998\"},{\"partname\":\"zzz02\",\"description\":\"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2\",\"accname\":\"49902\"}],\"selection_guide\":\"×‘×—×¨ ×—×©×‘×•×Ÿ ×œ×¤×™ ×¡×•×’ ×”×”×•×¦××”/×©×™×¨×•×ª ×‘×”×ª×× ×œ×“×•×’×××•×ª ×”×”×™×¡×˜×•×¨×™×•×ª\",\"note\":\"×™×© 2 ×—×©×‘×•× ×•×ª ××¤×©×¨×™×™× - ×‘×—×¨ ×œ×¤×™ ×¡×•×’ ×”×”×•×¦××”\"},\"sdinumit\":{\"field_name\":\"SDINUMIT\",\"location\":\"PINVOICESCONT_SUBFORM\",\"description\":\"××¡×¤×¨ ×”×§×¦××” ××¨×©×•×ª ×”××™×¡×™×\",\"importance\":\"×§×¨×™×˜×™ ×œ×—×©×‘×•× ×™×•×ª ××¢×œ ×¡×£! ×œ×œ× ××¡×¤×¨ ×–×” ×œ× × ×™×ª×Ÿ ×œ× ×›×•×ª ××¢\\\"×\",\"format\":\"9 ×¡×¤×¨×•×ª\",\"rule\":\"×¨×§ ×× ××•×¤×™×¢×” ×”××™×œ×” '×”×§×¦××”' ×‘××¤×•×¨×©!\",\"search_keywords\":[\"××¡×¤×¨ ×”×§×¦××”\",\"×”×§×¦××” ××¡'\"],\"NOT_valid\":[\"×ª×¢×•×“×ª ×¨×™×©×•×\",\"××¡×¤×¨ ××¡××›×ª×\"],\"example\":null}}},\"sample_from_history\":{\"BOOKNUM\":\"052785\",\"DETAILS\":\"×“×¨×™×Ÿ 8/25\",\"QPRICE\":7500,\"items\":[{\"PDES\":\"×ª×œ×•×©×™ ×©×›×¨\",\"PRICE\":7500,\"ACCNAME\":\"49902\"}]},\"ocr_extracted\":{\"subtotal\":7500,\"total_tax\":1350,\"invoice_total\":8850},\"invoice_data\":{\"PINVOICES\":[{\"SUPNAME\":\"3710\",\"CODE\":\"×©\\\"×—\",\"DEBIT\":\"D\",\"IVDATE\":\"11/09/25\",\"BOOKNUM\":\"052785\",\"DETAILS\":\"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2\",\"PINVOICEITEMS_SUBFORM\":[{\"PARTNAME\":\"zzz02\",\"PDES\":\"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2\",\"TQUANT\":1,\"TUNITNAME\":\"×™×—'\",\"PRICE\":22500,\"VATFLAG\":\"Y\",\"ACCNAME\":\"49998\"},{\"PARTNAME\":\"zzz02\",\"PDES\":\"×¨×‘×¢×•×Ÿ 3 ×œ×©× ×ª 2025\",\"TQUANT\":1,\"TUNITNAME\":\"×™×—'\",\"PRICE\":20000,\"VATFLAG\":\"Y\",\"ACCNAME\":\"49902\"}]}]}}]},\"technical_config\":{\"supplier_code\":\"3710\",\"supplier_name\":\"×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`\",\"all_templates\":[{\"template_index\":0,\"version\":\"5.0\",\"document_type\":\"regular_invoice\",\"extraction_rules\":{\"booknum\":{\"source\":\"ocrFields.InvoiceId\",\"transformations\":[{\"action\":\"remove_prefix\",\"pattern\":\"^SI\"},{\"action\":\"take_last_n_chars\",\"count\":7}],\"example\":\"052785\"},\"ivdate\":{\"source\":\"ocrFields.InvoiceDate\",\"format\":\"DD/MM/YY\",\"example\":\"11/09/25\"},\"price\":{\"calculation\":{\"formula\":\"InvoiceTotal_amount - TotalTax_amount\"}}},\"validation_rules\":{\"required_fields\":[\"SUPNAME\",\"CODE\",\"DEBIT\",\"IVDATE\",\"BOOKNUM\"]}}]},\"processing_scenario\":{\"supplier_code\":\"3710\",\"supplier_name\":\"×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`\",\"all_templates\":[{\"document_type\":\"regular_invoice\",\"check_docs\":false,\"check_import\":false,\"check_vehicles\":false}]},\"execution_report\":{\"stage\":\"×©×œ×‘ 3: ×‘× ×™×™×ª ×¤×œ×˜\",\"found\":[\"×¡×”\\\"×› ×ª×‘× ×™×•×ª: 1\",\"×ª×‘× ×™×•×ª × ×¡×¨×§×•: 1\",\"×ª×‘× ×™×ª 0: ×™×‘×•×=false, ×ª×¢×•×“×•×ª=false, ×—×™×•×‘/×–×™×›×•×™=D\"],\"not_found\":[],\"warnings\":[],\"errors\":[],\"templates_processed\":[{\"template_index\":0,\"document_type\":\"×—×©×‘×•× ×™×ª ×¨×’×™×œ×” ×¢× ×¤×™×¨×•×˜\",\"status\":\"success\"}]}}\n"],"stderr":[]},"executionTimeMs":1037,"result":{"status":"success","llm_prompt":{"supplier_code":"3710","supplier_name":"×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`","all_templates":[{"template_index":0,"document_type":"×—×©×‘×•× ×™×ª ×¨×’×™×œ×” ×¢× ×¤×™×¨×•×˜","document_type_info":{"type":"×—×©×‘×•× ×™×ª ×¨×’×™×œ×” ×¢× ×¤×™×¨×•×˜","type_key":"regular_invoice","structure_flags":{"has_import":false,"has_doc":false,"has_purchase_orders":false,"has_date_range":false,"has_budcode":false,"has_pdaccname":false,"inventory_management":"not_managed_inventory","debit_type":"D"}},"instructions":{"overview":"×—×©×‘×•× ×™×ª ××¡×¤×§ ×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`","processing_steps":["1. ×–×”×” ××ª ××¡×¤×¨ ×”×—×©×‘×•× ×™×ª (BOOKNUM) ××ª×•×š InvoiceId","2. ×—×œ×¥ ×ª××¨×™×š ×—×©×‘×•× ×™×ª (IVDATE) ××ª×•×š InvoiceDate - ×”××¨ ×œ×¤×•×¨××˜ DD/MM/YY","3. ×—×œ×¥ ×ª×™××•×¨ ×›×œ×œ×™ (DETAILS) - ×ª×™××•×¨ ×”×©×™×¨×•×ª ×”×¢×™×§×¨×™ (×œ× ×˜×œ×¤×•×Ÿ/×›×ª×•×‘×ª!)","4. ×œ×›×œ ×¤×¨×™×˜: ×—×œ×¥ PDES (×ª×™××•×¨), TQUANT (×›××•×ª), PRICE (××—×™×¨ ×œ×¤× ×™ ××¢\"×)","5. ×œ×›×œ ×¤×¨×™×˜: ×‘×—×¨ ACCNAME ××ª×•×š ×”×—×©×‘×•× ×•×ª ×”×–××™× ×™× ×œ×¤×™ ×¡×•×’ ×”×”×•×¦××”","6. ×‘×“×•×§ ×× ×™×© ××¡×¤×¨ ×”×§×¦××” (×¨×§ ×× ××•×¤×™×¢×” ×”××™×œ×” '×”×§×¦××”'!) - ×× ×›×Ÿ, ×¨×©×•× ×‘-SDINUMIT","7. ×—×©×‘ ××—×™×¨: SubTotal_amount ××• (InvoiceTotal - TotalTax)"],"fields":{"booknum":{"field_name":"BOOKNUM","description":"××¡×¤×¨ ×—×©×‘×•× ×™×ª ×¡×¤×§","how_to_find":"×—×¤×© ×‘×©×“×” InvoiceId ×‘-OCR","example":"052785"},"ivdate":{"field_name":"IVDATE","description":"×ª××¨×™×š ×—×©×‘×•× ×™×ª","how_to_find":"×§×— ××ª InvoiceDate ×•×”××¨ ×œ-DD/MM/YY","example":"11/09/25"},"details":{"field_name":"DETAILS","description":"×ª×™××•×¨ ×›×œ×œ×™ ×©×œ ×”×—×©×‘×•× ×™×ª ×‘×›×•×ª×¨×ª","importance":"×’×‘×•×”×” - ××¡×›× ××ª ××”×•×ª ×”×—×©×‘×•× ×™×ª","how_to_find":"×—×¤×© ×ª×™××•×¨ ×”×©×™×¨×•×ª ×”×¢×™×§×¨×™ ×‘×˜×§×¡×˜","do_NOT_use":["×˜×œ×¤×•×Ÿ","×¤×§×¡","×›×ª×•×‘×ª","××¡×¤×¨ ×¢×•×¡×§ ××•×¨×©×”"],"example":"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2"},"price":{"field_name":"PRICE","location":"PINVOICEITEMS_SUBFORM","description":"××—×™×¨ ×œ×¤× ×™ ××¢\"×","how_to_calculate":"SubTotal_amount ××• (InvoiceTotal_amount - TotalTax_amount)","example":7500},"pdes":{"field_name":"PDES","location":"PINVOICEITEMS_SUBFORM","description":"×ª×™××•×¨ ×”×¤×¨×™×˜/×©×™×¨×•×ª ×‘×©×•×¨×ª ×”×¤×™×¨×•×˜","importance":"×§×¨×™×˜×™! ×–×” ××–×”×” ××ª ×¡×•×’ ×”×”×•×¦××”","max_length":48,"how_to_find":"×—×¤×© ×‘×˜×§×¡×˜ ×©×•×¨×•×ª ×”××ª××¨×•×ª ×©×™×¨×•×ª×™×","example":"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2"},"accname":{"field_name":"ACCNAME","location":"PINVOICEITEMS_SUBFORM","description":"×—×©×‘×•×Ÿ ×”× ×”×œ×ª ×—×©×‘×•× ×•×ª ×œ×¡×™×•×•×’ ×”×”×•×¦××”","importance":"×§×¨×™×˜×™! ×§×•×‘×¢ ××™×š ×”×”×•×¦××” ××¡×•×•×’×ª","available_accounts":["49998","49902"],"examples_from_history":[{"partname":"zzz02","description":"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2","accname":"49998"},{"partname":"zzz02","description":"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2","accname":"49902"}],"selection_guide":"×‘×—×¨ ×—×©×‘×•×Ÿ ×œ×¤×™ ×¡×•×’ ×”×”×•×¦××”/×©×™×¨×•×ª ×‘×”×ª×× ×œ×“×•×’×××•×ª ×”×”×™×¡×˜×•×¨×™×•×ª","note":"×™×© 2 ×—×©×‘×•× ×•×ª ××¤×©×¨×™×™× - ×‘×—×¨ ×œ×¤×™ ×¡×•×’ ×”×”×•×¦××”"},"sdinumit":{"field_name":"SDINUMIT","location":"PINVOICESCONT_SUBFORM","description":"××¡×¤×¨ ×”×§×¦××” ××¨×©×•×ª ×”××™×¡×™×","importance":"×§×¨×™×˜×™ ×œ×—×©×‘×•× ×™×•×ª ××¢×œ ×¡×£! ×œ×œ× ××¡×¤×¨ ×–×” ×œ× × ×™×ª×Ÿ ×œ× ×›×•×ª ××¢\"×","format":"9 ×¡×¤×¨×•×ª","rule":"×¨×§ ×× ××•×¤×™×¢×” ×”××™×œ×” '×”×§×¦××”' ×‘××¤×•×¨×©!","search_keywords":["××¡×¤×¨ ×”×§×¦××”","×”×§×¦××” ××¡'"],"NOT_valid":["×ª×¢×•×“×ª ×¨×™×©×•×","××¡×¤×¨ ××¡××›×ª×"],"example":null}}},"sample_from_history":{"BOOKNUM":"052785","DETAILS":"×“×¨×™×Ÿ 8/25","QPRICE":7500,"items":[{"PDES":"×ª×œ×•×©×™ ×©×›×¨","PRICE":7500,"ACCNAME":"49902"}]},"ocr_extracted":{"subtotal":7500,"total_tax":1350,"invoice_total":8850},"invoice_data":{"PINVOICES":[{"SUPNAME":"3710","CODE":"×©\"×—","DEBIT":"D","IVDATE":"11/09/25","BOOKNUM":"052785","DETAILS":"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2","PINVOICEITEMS_SUBFORM":[{"PARTNAME":"zzz02","PDES":"×“×•×— ×œ×©× ×ª 2024 ×—×œ×§ 2","TQUANT":1,"TUNITNAME":"×™×—'","PRICE":22500,"VATFLAG":"Y","ACCNAME":"49998"},{"PARTNAME":"zzz02","PDES":"×¨×‘×¢×•×Ÿ 3 ×œ×©× ×ª 2025","TQUANT":1,"TUNITNAME":"×™×—'","PRICE":20000,"VATFLAG":"Y","ACCNAME":"49902"}]}]}}]},"technical_config":{"supplier_code":"3710","supplier_name":"×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`","all_templates":[{"template_index":0,"version":"5.0","document_type":"regular_invoice","extraction_rules":{"booknum":{"source":"ocrFields.InvoiceId","transformations":[{"action":"remove_prefix","pattern":"^SI"},{"action":"take_last_n_chars","count":7}],"example":"052785"},"ivdate":{"source":"ocrFields.InvoiceDate","format":"DD/MM/YY","example":"11/09/25"},"price":{"calculation":{"formula":"InvoiceTotal_amount - TotalTax_amount"}}},"validation_rules":{"required_fields":["SUPNAME","CODE","DEBIT","IVDATE","BOOKNUM"]}}]},"processing_scenario":{"supplier_code":"3710","supplier_name":"×“×¨×™×Ÿ ×˜×¨×’×œ ×•×©×•×ª`","all_templates":[{"document_type":"regular_invoice","check_docs":false,"check_import":false,"check_vehicles":false}]},"execution_report":{"stage":"×©×œ×‘ 3: ×‘× ×™×™×ª ×¤×œ×˜","found":["×¡×”\"×› ×ª×‘× ×™×•×ª: 1","×ª×‘× ×™×•×ª × ×¡×¨×§×•: 1","×ª×‘× ×™×ª 0: ×™×‘×•×=false, ×ª×¢×•×“×•×ª=false, ×—×™×•×‘/×–×™×›×•×™=D"],"not_found":[],"warnings":[],"errors":[],"templates_processed":[{"template_index":0,"document_type":"×—×©×‘×•× ×™×ª ×¨×’×™×œ×” ×¢× ×¤×™×¨×•×˜","status":"success"}]}}}'