<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processing Invoice - ×—×•×§×™ ×¢×™×‘×•×“</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .breadcrumb {
            background: #f8f9fa;
            padding: 15px 40px;
            border-bottom: 1px solid #e9ecef;
        }

        .breadcrumb a {
            color: #f5576c;
            text-decoration: none;
            font-weight: bold;
        }

        .content {
            padding: 40px;
        }

        h2 {
            color: #f5576c;
            border-bottom: 3px solid #f5576c;
            padding-bottom: 10px;
            margin: 30px 0 20px 0;
            font-size: 2em;
        }

        h3 {
            color: #f093fb;
            margin: 25px 0 15px 0;
            font-size: 1.5em;
        }

        .scenario-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-right: 5px solid #f5576c;
        }

        .scenario-card h3 {
            color: #f5576c;
            margin-bottom: 15px;
        }

        .mapping-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.95em;
        }

        .mapping-table th {
            background: #f5576c;
            color: white;
            padding: 12px;
            text-align: right;
        }

        .mapping-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #e9ecef;
        }

        .mapping-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .source-template {
            background: #d4edda;
            color: #155724;
        }

        .source-ocr {
            background: #d1ecf1;
            color: #0c5460;
        }

        .source-vehicles {
            background: #fff3cd;
            color: #856404;
        }

        .source-none {
            background: #f8d7da;
            color: #721c24;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            direction: ltr;
            text-align: left;
            font-size: 0.9em;
        }

        .important-note {
            background: #fff3cd;
            border-right: 5px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        footer {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>âš™ï¸ Processing Invoice</h1>
            <p>×©×œ×‘ 2: ×¢×™×‘×•×“ ×—×©×‘×•× ×™×•×ª ×•×™×¦×™×¨×ª ×ª×‘× ×™×ª ×××•×—×“×ª</p>
        </header>

        <div class="breadcrumb">
            <a href="../Documentation-Mapping-Rules.html">â¬… ×—×–×¨×” ×œ×“×£ ×”×¨××©×™</a>
        </div>

        <div class="content">
            <h2>ğŸ“‹ ×¡×§×™×¨×”</h2>
            <p>××•×“×•×œ Processing Invoice ×œ×•×§×— ×—×©×‘×•× ×™×ª ×¡×¨×•×§×” (OCR) ×•××©×œ×‘ ××•×ª×” ×¢× ×”×’×“×¨×•×ª ×”×¡×¤×§ ×”××œ×•××“×•×ª ×›×“×™ ×œ×™×¦×•×¨ ×ª×‘× ×™×ª ×××•×—×“×ª.</p>

            <h2>ğŸ“¥ ×§×œ×˜</h2>
            <ul>
                <li><strong>learned_config:</strong> ×”×’×“×¨×•×ª ×¡×¤×§ ××œ×•××“×•×ª (×-Supplier Data Learning)</li>
                <li><strong>AZURE_RESULT:</strong> ×ª×•×¦××•×ª OCR (Azure Document Intelligence)</li>
                <li><strong>docs_list:</strong> ×¨×©×™××ª ×ª×¢×•×“×•×ª ××©×œ×•×— (×× ×§×™×™××•×ª)</li>
                <li><strong>import_files:</strong> ×¨×©×™××ª ×ª×™×§×™ ×™×‘×•× (×× ×§×™×™××™×)</li>
            </ul>

            <h2>ğŸ“¤ ×¤×œ×˜ - ××‘× ×” ×—×“×© âœ¨</h2>
            <div class="code-block">
{
  "status": "success",

  "llm_prompt": {
    "supplier_code": "5014",
    "supplier_name": "×˜×›×•××˜×¨-××›×•×Ÿ ×¡×¤×™×“×•××˜×¨×™×",
    "all_templates": [
      {
        "document_type": "×—×©×‘×•× ×™×ª ×©×™×¨×•×ª×™ ×¨×›×‘ ×•××•×¡×š",
        "invoice_data": {
          "PINVOICES": [...]
        },
        "instructions": {...}
      }
    ]
  },

  "technical_config": {
    "supplier_code": "5014",
    "supplier_name": "×˜×›×•××˜×¨-××›×•×Ÿ ×¡×¤×™×“×•××˜×¨×™×",
    "all_templates": [
      {
        "version": "4.2",
        "document_type": "vehicle_service_invoice",
        "extraction_rules": {...},
        "vehicle_mapping": {...}
      }
    ]
  },

  "processing_scenario": {
    "supplier_code": "5014",
    "supplier_name": "×˜×›×•××˜×¨-××›×•×Ÿ ×¡×¤×™×“×•××˜×¨×™×",
    "all_templates": [
      {
        "check_docs": false,
        "check_import": false,
        "check_vehicles": true
      }
    ]
  }
}
            </div>

            <div class="important-note">
                <h3>âœ¨ ×©×™× ×•×™ ××‘× ×” ×—×©×•×‘!</h3>
                <p><strong>supplier_code</strong> ×•-<strong>supplier_name</strong> ××•×¤×™×¢×™× ×¨×§ ×‘×¨××” ×”×¢×œ×™×•× ×”.</p>
                <p><strong>invoice_data</strong> ×¢×‘×¨ ×œ×ª×•×š <strong>all_templates</strong> ×©×œ ×›×œ ×¡×§×¦×™×”.</p>
                <p>×–×” ××•× ×¢ ×©×›×¤×•×œ×™× ×•×××¤×©×¨ ×ª××™×›×” ×‘××¡×¤×¨ ×ª×‘× ×™×•×ª ×œ××•×ª×• ×¡×¤×§.</p>
            </div>

            <h2>ğŸ¯ 5 ×ª×¨×—×™×©×™ ×¢×™×‘×•×“</h2>

            <!-- ×ª×¨×—×™×© 1 -->
            <div class="scenario-card">
                <h3>1ï¸âƒ£ ×¨×›×‘×™× (PARTNAME = "car")</h3>
                <p><strong>×–×™×”×•×™:</strong> × ××¦××• ××¡×¤×¨×™ ×¨×›×‘×™× ×‘-OCR + ×™×© vehicle_rules</p>
                <p><strong>××‘× ×” ×—×©×‘×•× ×™×ª:</strong> PINVOICEITEMS_SUBFORM (×¤×¨×™×˜ ×œ×›×œ ×¨×›×‘)</p>

                <table class="mapping-table">
                    <tr>
                        <th>×©×“×”</th>
                        <th>××§×•×¨</th>
                        <th>×“×•×’××”</th>
                    </tr>
                    <tr>
                        <td>PARTNAME</td>
                        <td><span class="badge source-vehicles">×”×’×“×¨×•×ª ×¨×›×‘×™×</span></td>
                        <td>"car"</td>
                    </tr>
                    <tr>
                        <td>PDES</td>
                        <td><span class="badge source-ocr">OCR</span></td>
                        <td>"×˜×™×¤×•×œ 75000 ×§"×"</td>
                    </tr>
                    <tr>
                        <td>TQUANT</td>
                        <td><span class="badge source-ocr">OCR</span></td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>TUNITNAME</td>
                        <td><span class="badge source-ocr">OCR</span></td>
                        <td>"×™×—'"</td>
                    </tr>
                    <tr>
                        <td>PRICE</td>
                        <td><span class="badge source-ocr">OCR (×—×™×©×•×‘)</span></td>
                        <td>(InvoiceTotal - TotalTax) / vehicles.length</td>
                    </tr>
                    <tr>
                        <td>VATFLAG</td>
                        <td><span class="badge source-vehicles">×¨×©×™××ª ×¨×›×‘×™×</span></td>
                        <td>"Y"</td>
                    </tr>
                    <tr>
                        <td>ACCNAME</td>
                        <td><span class="badge source-vehicles">×¨×©×™××ª ×¨×›×‘×™×</span></td>
                        <td>"66979"</td>
                    </tr>
                    <tr>
                        <td>SPECIALVATFLAG</td>
                        <td><span class="badge source-vehicles">×¨×©×™××ª ×¨×›×‘×™×</span></td>
                        <td>"Y" (×¨×§ ×× ××•×’×“×¨)</td>
                    </tr>
                    <tr>
                        <td>BUDCODE</td>
                        <td><span class="badge source-none">×¨×™×§</span></td>
                        <td>-</td>
                    </tr>
                </table>
            </div>

            <!-- ×ª×¨×—×™×© 2 -->
            <div class="scenario-card">
                <h3>2ï¸âƒ£ ×¤×¨×™×˜×™× ×¨×’×™×œ×™× (×¢× ×¤×™×¨×•×˜)</h3>
                <p><strong>×–×™×”×•×™:</strong> ××™×Ÿ ×¨×›×‘×™×, ×™×© Items ×‘-OCR</p>
                <p><strong>××‘× ×” ×—×©×‘×•× ×™×ª:</strong> PINVOICEITEMS_SUBFORM (×¤×¨×™×˜ ×œ×›×œ ×©×•×¨×” ×‘-OCR)</p>

                <table class="mapping-table">
                    <tr>
                        <th>×©×“×”</th>
                        <th>××§×•×¨</th>
                        <th>×“×•×’××”</th>
                    </tr>
                    <tr>
                        <td>PARTNAME</td>
                        <td><span class="badge source-template">×ª×‘× ×™×ª</span></td>
                        <td>"×”×•×¦××•×ª"</td>
                    </tr>
                    <tr>
                        <td>PDES</td>
                        <td><span class="badge source-ocr">OCR</span></td>
                        <td>"××›×¡ + ×”×•×‘×œ×”"</td>
                    </tr>
                    <tr>
                        <td>TQUANT</td>
                        <td><span class="badge source-ocr">OCR</span></td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>TUNITNAME</td>
                        <td><span class="badge source-template">×ª×‘× ×™×ª</span></td>
                        <td>"×™×—'"</td>
                    </tr>
                    <tr>
                        <td>PRICE</td>
                        <td><span class="badge source-ocr">OCR</span></td>
                        <td>500</td>
                    </tr>
                    <tr>
                        <td>VATFLAG</td>
                        <td><span class="badge source-template">×ª×‘× ×™×ª</span></td>
                        <td>"Y"</td>
                    </tr>
                    <tr>
                        <td>ACCNAME</td>
                        <td><span class="badge source-template">×ª×‘× ×™×ª</span></td>
                        <td>"12345"</td>
                    </tr>
                    <tr>
                        <td>SPECIALVATFLAG</td>
                        <td><span class="badge source-template">×ª×‘× ×™×ª</span></td>
                        <td>"Y" (×¨×§ ×× ××•×’×“×¨ ×‘×ª×‘× ×™×ª)</td>
                    </tr>
                    <tr>
                        <td>BUDCODE</td>
                        <td><span class="badge source-none">×¨×™×§</span></td>
                        <td>-</td>
                    </tr>
                </table>
            </div>

            <!-- ×ª×¨×—×™×© 3 -->
            <div class="scenario-card">
                <h3>3ï¸âƒ£ ×ª×¢×•×“×•×ª ×‘×œ×‘×“ (××œ××™ ×× ×•×”×œ)</h3>
                <p><strong>×–×™×”×•×™:</strong> has_doc = true, × ××¦××• ×ª×¢×•×“×•×ª, ××™×Ÿ ×™×‘×•×</p>
                <p><strong>××‘× ×” ×—×©×‘×•× ×™×ª:</strong> DOCNO/PIVDOC_SUBFORM ×‘×œ×‘×“ (××™×Ÿ PINVOICEITEMS_SUBFORM)</p>
                <p>×›×œ ×”×¤×™×¨×•×˜ × ××¦× ×‘×ª×¢×•×“×•×ª ×”××©×œ×•×—, ×œ× ×‘×—×©×‘×•× ×™×ª.</p>
            </div>

            <!-- ×ª×¨×—×™×© 4 -->
            <div class="scenario-card">
                <h3>4ï¸âƒ£ ×™×‘×•× + ×ª×¢×•×“×•×ª (××œ××™ ××™×•×‘× ×× ×•×”×œ)</h3>
                <p><strong>×–×™×”×•×™:</strong> has_import = true, has_doc = true, × ××¦××• ×ª×¢×•×“×•×ª</p>
                <p><strong>××‘× ×” ×—×©×‘×•× ×™×ª:</strong> IMPFNUM + PIVDOC_SUBFORM (××™×Ÿ PINVOICEITEMS_SUBFORM)</p>
                <p>×”×¤×™×¨×•×˜ × ××¦× ×‘×ª×¢×•×“×•×ª, ×”×—×©×‘×•× ×™×ª ×¨×§ ××§×©×¨×ª ×œ×ª×™×§ ×™×‘×•× ×•×œ×ª×¢×•×“×•×ª.</p>
            </div>

            <!-- ×ª×¨×—×™×© 5 -->
            <div class="scenario-card">
                <h3>5ï¸âƒ£ ×™×‘×•× + ×”×•×¦××•×ª (×œ×œ× ×ª×¢×•×“×•×ª)</h3>
                <p><strong>×–×™×”×•×™:</strong> has_import = true, has_doc = false</p>
                <p><strong>××‘× ×” ×—×©×‘×•× ×™×ª:</strong> IMPFNUM + PINVOICEITEMS_SUBFORM</p>
                <p><strong>××™×¤×•×™ ×©×“×•×ª:</strong> ×–×”×” ×œ×ª×¨×—×™×© 2 (×¤×¨×™×˜×™× ×¨×’×™×œ×™× ××”×ª×‘× ×™×ª + OCR)</p>
            </div>

            <h2>ğŸ”‘ ×¢×§×¨×•× ×•×ª ××™×¤×•×™</h2>
            <div class="important-note">
                <h4>1. ×ª×‘× ×™×ª = ×‘×¡×™×¡ ×§×‘×•×¢</h4>
                <p>PARTNAME, TUNITNAME, VATFLAG, ACCNAME, SPECIALVATFLAG - ××”×ª×‘× ×™×ª ×”××œ×•××“×ª</p>

                <h4>2. OCR = × ×ª×•× ×™× ×“×™× ××™×™×</h4>
                <p>PDES, TQUANT, PRICE - ×-OCR ×‘×–××Ÿ ×××ª</p>

                <h4>3. ×¨×›×‘×™× = ××™×¤×•×™ ××™×•×—×“</h4>
                <p>ACCNAME ××¨×©×™××ª ×¨×›×‘×™× (vehicle_account_mapping)</p>

                <h4>4. BUDCODE = ×¨×™×§ (×‘×›×œ ×”×ª×¨×—×™×©×™×)</h4>
                <p>×”×œ×•×’×™×§×” ×œ× ×××•×¤×™×™× ×ª ×¡×•×¤×™×ª</p>
            </div>

            <h2>ğŸ”„ ×—×™×‘×•×¨ ×œ×©×œ×‘ ×”×‘×</h2>
            <p>×”×ª×‘× ×™×ª ×”×××•×—×“×ª × ×©×œ×—×ª ×œ-<strong>Production Invoice</strong> ×©× ×”×™× ××¢×•×‘×“×ª ×•× ×©×œ×—×ª ×œ-ERP.</p>
            <p><a href="../Production Invoice/Documentation-Production-Mapping.html" style="color: #f5576c; font-weight: bold;">âœ ×œ×“×•×§×•×× ×˜×¦×™×” ×©×œ Production Invoice</a></p>
        </div>

        <footer>
            <p>ğŸ“… ×¢×•×“×›×Ÿ ×œ××—×¨×•× ×”: × ×•×‘××‘×¨ 2025</p>
            <p>ğŸ”§ ×’×¨×¡×”: 4.2</p>
        </footer>
    </div>
</body>
</html>
